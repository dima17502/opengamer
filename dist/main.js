/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@vkontakte/vk-bridge/dist/index.umd.js":
/*!*************************************************************!*\
  !*** ./node_modules/@vkontakte/vk-bridge/dist/index.umd.js ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports) {

eval("!function(e,n){ true?n(exports):0}(this,(function(e){\"use strict\";var n=function(){return n=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e},n.apply(this,arguments)};function t(e,n,t){if(t||2===arguments.length)for(var o,r=0,a=n.length;r<a;r++)!o&&r in n||(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}function o(e,t){var o,r,a=(o={current:0,next:function(){return++this.current}},r={},{add:function(e,n){var t=null!=n?n:o.next();return r[t]=e,t},resolve:function(e,n,t){var o=r[e];o&&(t(n)?o.resolve(n):o.reject(n),r[e]=null)}});return t((function(e){if(e.detail&&e.detail.data&&\"object\"==typeof e.detail.data&&\"request_id\"in e.detail.data){var n=e.detail.data,t=n.request_id,o=function(e,n){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(t[o]=e[o]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)n.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(t[o[r]]=e[o[r]])}return t}(n,[\"request_id\"]);t&&a.resolve(t,o,(function(e){return!(\"error_type\"in e)}))}})),function(t,o){return void 0===o&&(o={}),new Promise((function(r,p){var i=a.add({resolve:r,reject:p},o.request_id);e(t,n(n({},o),{request_id:i}))}))}}var r=\"undefined\"!=typeof window,a=Boolean(r&&window.AndroidBridge),p=Boolean(r&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),i=Boolean(r&&window.ReactNativeWebView&&\"function\"==typeof window.ReactNativeWebView.postMessage),s=r&&!a&&!p,u=s&&/(^\\?|&)vk_platform=mobile_web(&|$)/.test(location.search),d=s?\"message\":\"VKWebAppEvent\",c=t([\"VKWebAppInit\",\"VKWebAppGetCommunityAuthToken\",\"VKWebAppAddToCommunity\",\"VKWebAppAddToHomeScreenInfo\",\"VKWebAppClose\",\"VKWebAppCopyText\",\"VKWebAppCreateHash\",\"VKWebAppGetUserInfo\",\"VKWebAppSetLocation\",\"VKWebAppSendToClient\",\"VKWebAppGetClientVersion\",\"VKWebAppGetPhoneNumber\",\"VKWebAppGetEmail\",\"VKWebAppGetGroupInfo\",\"VKWebAppGetGeodata\",\"VKWebAppGetCommunityToken\",\"VKWebAppGetConfig\",\"VKWebAppGetLaunchParams\",\"VKWebAppSetTitle\",\"VKWebAppGetAuthToken\",\"VKWebAppCallAPIMethod\",\"VKWebAppJoinGroup\",\"VKWebAppLeaveGroup\",\"VKWebAppAllowMessagesFromGroup\",\"VKWebAppDenyNotifications\",\"VKWebAppAllowNotifications\",\"VKWebAppOpenPayForm\",\"VKWebAppOpenApp\",\"VKWebAppShare\",\"VKWebAppShowWallPostBox\",\"VKWebAppScroll\",\"VKWebAppShowOrderBox\",\"VKWebAppShowLeaderBoardBox\",\"VKWebAppShowInviteBox\",\"VKWebAppShowRequestBox\",\"VKWebAppAddToFavorites\",\"VKWebAppShowStoryBox\",\"VKWebAppStorageGet\",\"VKWebAppStorageGetKeys\",\"VKWebAppStorageSet\",\"VKWebAppFlashGetInfo\",\"VKWebAppSubscribeStoryApp\",\"VKWebAppOpenWallPost\",\"VKWebAppCheckAllowedScopes\",\"VKWebAppCheckBannerAd\",\"VKWebAppHideBannerAd\",\"VKWebAppShowBannerAd\",\"VKWebAppCheckNativeAds\",\"VKWebAppShowNativeAds\",\"VKWebAppRetargetingPixel\",\"VKWebAppConversionHit\",\"VKWebAppShowSubscriptionBox\",\"VKWebAppCheckSurvey\",\"VKWebAppShowSurvey\",\"VKWebAppScrollTop\",\"VKWebAppScrollTopStart\",\"VKWebAppScrollTopStop\",\"VKWebAppShowSlidesSheet\",\"VKWebAppTranslate\",\"VKWebAppRecommend\"],s&&!u?[\"VKWebAppResizeWindow\",\"VKWebAppAddToMenu\",\"VKWebAppShowInstallPushBox\",\"VKWebAppGetFriends\",\"VKWebAppShowCommunityWidgetPreviewBox\",\"VKWebAppCallStart\",\"VKWebAppCallJoin\",\"VKWebAppCallGetStatus\"]:[\"VKWebAppShowImages\"],!0),l=r?window.AndroidBridge:void 0,b=p?window.webkit.messageHandlers:void 0,f=s?parent:void 0;var A,v,m,W,V,_,K;e.EAdsFormats=void 0,(A=e.EAdsFormats||(e.EAdsFormats={})).REWARD=\"reward\",A.INTERSTITIAL=\"interstitial\",e.BannerAdLayoutType=void 0,(v=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE=\"resize\",v.OVERLAY=\"overlay\",e.BannerAdLocation=void 0,(m=e.BannerAdLocation||(e.BannerAdLocation={})).TOP=\"top\",m.BOTTOM=\"bottom\",e.EGrantedPermission=void 0,(W=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA=\"camera\",W.LOCATION=\"location\",W.PHOTO=\"photo\",e.EGetLaunchParamsResponseLanguages=void 0,(V=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU=\"ru\",V.UK=\"uk\",V.UA=\"ua\",V.EN=\"en\",V.BE=\"be\",V.KZ=\"kz\",V.PT=\"pt\",V.ES=\"es\",e.EGetLaunchParamsResponseGroupRole=void 0,(_=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN=\"admin\",_.EDITOR=\"editor\",_.MEMBER=\"member\",_.MODER=\"moder\",_.NONE=\"none\",e.EGetLaunchParamsResponsePlatforms=void 0,(K=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB=\"desktop_web\",K.DESKTOP_WEB_MESSENGER=\"desktop_web_messenger\",K.DESKTOP_APP_MESSENGER=\"desktop_app_messenger\",K.MOBILE_WEB=\"mobile_web\",K.MOBILE_ANDROID=\"mobile_android\",K.MOBILE_ANDROID_MESSENGER=\"mobile_android_messenger\",K.MOBILE_IPHONE=\"mobile_iphone\",K.MOBILE_IPHONE_MESSENGER=\"mobile_iphone_messenger\",K.MOBILE_IPAD=\"mobile_ipad\";var w=function(e){var n=void 0,r=[];function u(e){r.push(e)}function A(){return p||a}function v(){return s&&window.parent!==window}function m(){return A()||v()}function W(e){if(p||a)return t([],r,!0).map((function(n){return n.call(null,e)}));var o=null==e?void 0:e.data;if(s&&o){if(i&&\"string\"==typeof o)try{o=JSON.parse(o)}catch(e){}var u=o.type,d=o.data,c=o.frameId;u&&(\"VKWebAppSettings\"!==u?t([],r,!0).map((function(e){return e({detail:{type:u,data:d}})})):n=c)}}i&&/(android)/i.test(navigator.userAgent)?document.addEventListener(d,W):\"undefined\"!=typeof window&&\"addEventListener\"in window&&window.addEventListener(d,W);var V=o((function(t,o){l&&l[t]?l[t](JSON.stringify(o)):b&&b[t]&&\"function\"==typeof b[t].postMessage?b[t].postMessage(o):i?window.ReactNativeWebView.postMessage(JSON.stringify({handler:t,params:o})):f&&\"function\"==typeof f.postMessage&&f.postMessage({handler:t,params:o,type:\"vk-connect\",webFrameId:n,connectVersion:e},\"*\")}),u);return{send:V,sendPromise:V,subscribe:u,unsubscribe:function(e){var n=r.indexOf(e);n>-1&&r.splice(n,1)},supports:function(e){return a?!(!l||\"function\"!=typeof l[e]):p?!(!b||!b[e]||\"function\"!=typeof b[e].postMessage):!!s&&c.includes(e)},isWebView:A,isIframe:v,isEmbedded:m,isStandalone:function(){return!m()}}}(\"2.11.0\");e.applyMiddleware=function e(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];return t.includes(void 0)||t.includes(null)?e.apply(void 0,t.filter((function(e){return\"function\"==typeof e}))):function(e){if(0===t.length)return e;var o,r={subscribe:e.subscribe,send:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.send.apply(e,n)}},a=t.filter((function(e){return\"function\"==typeof e})).map((function(e){return e(r)})).reduce((function(e,n){return function(t){return e(n(t))}}));return o=a(e.send),n(n({},e),{send:o})}},e.default=w,e.parseURLSearchParamsForGetLaunchParams=function(n){var t={};try{var o=new URLSearchParams(n);o.forEach((function(n,o){switch(o){case\"vk_ts\":case\"vk_is_recommended\":case\"vk_profile_id\":case\"vk_has_profile_button\":case\"vk_testing_group_id\":case\"vk_user_id\":case\"vk_app_id\":case\"vk_group_id\":t[o]=Number(n);break;case\"sign\":case\"vk_chat_id\":case\"vk_ref\":case\"vk_access_token_settings\":t[o]=n;break;case\"odr_enabled\":t.odr_enabled=\"1\"===n?1:void 0;break;case\"vk_is_app_user\":case\"vk_are_notifications_enabled\":case\"vk_is_favorite\":t[o]=function(e){switch(e){case\"0\":return 0;case\"1\":return 1;default:return}}(n);break;case\"vk_language\":t.vk_language=function(n){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===n}))}(n)?n:void 0;break;case\"vk_viewer_group_role\":t.vk_viewer_group_role=function(n){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===n}))}(n)?n:void 0;break;case\"vk_platform\":t.vk_platform=function(n){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===n}))}(n)?n:void 0}}))}catch(e){console.warn(e)}return t},Object.defineProperty(e,\"__esModule\",{value:!0})}));\n//# sourceMappingURL=index.umd.js.map\n\n\n//# sourceURL=webpack://open_gamer_wp2/./node_modules/@vkontakte/vk-bridge/dist/index.umd.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vkontakte/vk-bridge */ \"./node_modules/@vkontakte/vk-bridge/dist/index.umd.js\");\n/* harmony import */ var _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0__);\n\r\n/*\r\n        специальные эффекты: бессмертие на 10 сек, замедляют или ускоряют ракеты\r\n        эффекты падают, держатся на земле 5 секунд и исчезают\r\n        на 2 уровне от ракет остается радиоактивные пепел и надо держаться в воздухе, эффект можно выйти за рамки игры\r\n        у геймера есть джетпак\r\n        ракеты появляются, держатся 3 секунды потом падают\r\n        Описание: тренируйте реакцию, уворачивайтесь от ракет как можно дольше\r\n        сложность должна увеличиваться \r\n\r\n        - режим мирный атом\r\n        - выживание\r\n        - подвисает полет бонусов раз в секунду\r\n        - player реагирует на нажатие клавиши с лагом\r\n        - не работает перемещения игрока по клику\r\n        - 3 ошибки в мирном режиме\r\n        - сделать 3 уровня в режиме выживания 1 2 3 меняется только mis_gen_speed 323 283 223-easy 173- middle 149 -- hard проходимо\r\n        -- insane 139 легкий, средний, тяжелый, безумный, пользовательский открывается после тяжелого\r\n        следующий уровень открывает только после прохождения первого\r\n\r\n\r\n\r\n        Допилить\r\n        - \r\n\r\n        -научиться делать куки, и загружаться из кук пользователя сохраняя результаты\r\n        - после \"пробуем еще?\" нужно добавить кнопку в Меню, дизайн взять с элемента yessure\r\n\r\n      -  ракеты подвисают пизда\r\n      -анимация отображается во время а не после рекламы\r\n\r\n*/\r\n\r\n_vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default().send(\"VKWebAppInit\", {});\r\n\r\nvar gf_color = \"#fff\";\r\nvar info_width = 650;\r\nvar info_height = \"auto\";\r\nvar start_mt_bonus = -40;\r\nvar start_mt_missile = -100;\r\nvar bonus_width = 40;       //40*40\r\nvar bonus_height = 40;\r\nvar bonus_counter = 0;\r\nvar game_status = 0;\r\nvar x1 = 0;\r\nvar x2 = x1 + player_width;\r\nvar y1 = 0;\r\nvar y2 = y1 + player_height;\r\nvar player_active = 0;\r\nvar max_missiles = 18;\r\nvar max_bonuses = 17;\r\nvar free_bonuses = [];\r\nvar free_missiles = [];\r\nvar active_bonuses = {};\r\nvar missile_active = {};\r\nvar secs = 0;\r\nvar clock_id = 0;\r\nvar bonus_dict = {};\r\nvar missile_dict = {};\r\nvar moves = 0;\r\nvar missile_speed = 20;\r\nvar missile_step = 2;\r\nvar dif_param = 3;\r\nvar bonus_step = 1;\r\nvar bonus_init_id = 0;\r\nvar missile_init_id = 0;\r\nvar bon_gen_speed = 709;\r\nvar bon_move_speed = 11;\r\nvar mis_gen_speed = 139;\r\nvar mis_move_speed = 11;\r\nvar date = new Date();\r\nvar date2 = 1;\r\nvar date3 = 0;\r\nvar date4 = 1;\r\nvar player_mt0 = 595;\r\nvar created_bonuses = 50;\r\nvar created_missiles = 100;\r\nvar ad_time = 5000;\r\nvar player_width = 80;\r\nvar player_height = 106;\r\nvar gf_width = 700;\r\nvar gf_height = 700;\r\nvar missile_width = 39;\r\nvar missile_height = 100;\r\nvar music_width = 60;\r\nvar music_height = 60;\r\nvar page_width = 400;\r\nvar page_height = 300;\r\nvar levels_width = 400;\r\nvar levels_height = 400;\r\nvar warning_width = 400;\r\nvar warning_height = 200;\r\nvar win_bar_width = 400;\r\nvar win_bar_height = 160;\r\nvar custom_menu_width = 400;\r\nvar custom_menu_height = 300;\r\nvar sure_width = 400;\r\nvar sure_height = 150;\r\nvar available_lvl = 1;\r\nvar regime = 0;\r\nvar peaceful_mode = 0;\r\nvar zero_atoms = 0;\r\nvar level_dict = {\"easy\": 1, \"peasy\":1, \"medium\":2,\"pmedium\":2, \"hard\":3, \"phard\":3, \"custom\":4, \"pcustom\":4};\r\nvar num_to_level = {1:\"easy\", 2:\"medium\", 3:\"hard\", 4:\"custom\"};\r\nvar level_options = {1: 423, 2:173, 3:149};\r\nvar plevel_options = {1: 332, 2:267, 3:233};\r\nvar current_lvl = 1;\r\nvar win_time = 60;\r\nvar pause_width = 60;\r\nvar pause_height = 60;\r\nvar home_width =   62;\r\nvar home_height = 62;\r\nvar heart_width = 56;       // 35 * 28\r\nvar heart_height = 48;\r\nvar text_60sec = \"Продержитесь 60 секунд уворачиваясь от ракет \\n Управление перетаскиванием персонажа /стрелками' / зажатым курсором или пальцем. \\nПауза - пробел \\nУдачи!\";\r\nvar text_peaceful = \"Ловите атомы в течение минуты, до того как они упадут на землю. \\nУ вас 3 жизни. \\nУправление зажатым курсором, пальцем, клавишами 'wasd'. \\nПауза - пробел. Удачи!\";\r\nvar player_lifes = 3;\r\nvar peaceful_available = 1;\r\nvar temp_lvl = 1;\r\nvar star_width = 40;\r\nvar star_height = 40;\r\nvar gray_path_value = \"url('./images/star_icon_gray2.svg')\";\r\nvar gold_path_value = \"url('./images/star_icon3.svg')\";\r\nvar change1_id = 0;\r\nvar change2_id = 0;\r\nvar change3_id = 0;\r\nvar music_on = 1;\r\nvar last_song = './audios/main_theme.mp3';\r\nvar ad_width = 890;\r\nvar ad_height = 600;\r\nvar mobile_mode = 0;\r\nvar x = window.matchMedia(\"(max-width: 700px)\");\r\nvar s_width = window.innerWidth;            // 360 * 736\r\nvar s_height = window.innerHeight;\r\n//alert([s_width, s_height]);\r\nif(s_width < 900)\r\n    mobile_mode = 1;\r\nvar vk_width = s_width;\r\nvar vk_height = s_height;\r\nif(mobile_mode == 0)\r\n{\r\n    vk_width = 900;\r\n    vk_height = 750;\r\n}\r\nvar coef_x = parseFloat(parseInt(vk_width)  / 900);\r\nvar coef_y = parseFloat(parseInt(vk_height)  / 750);\r\nvar star_dict = {1:0,2:0,3:0, 4:0};\r\nvar open_levels = {1:1,2:0, 3:0, 4:0};\r\nvar open_plevels = {1:1, 2:0, 3:0, 4:0};\r\nvar cookie_lifetime = 8640000;\r\nvar level_colors = [\"#3e7\",\"#39f\",\"#e37\",\"orange\"];\r\nvar ac_token = \"\";\r\nmain();\r\n\r\n\r\nfunction main()\r\n{\r\n    date3 = new Date();\r\n    //get_access_token();\r\n\r\n    adaptate();\r\n    set_area();                 //\r\n    create_ad_warning();\r\n\r\n    create_main_page();         //\r\n    \r\n    create_level_page();        //\r\n    create_plevel_page();       //\r\n    create_warning();           \r\n    \r\n    create_start_and_info();    //\r\n    create_game_field();        //\r\n    create_clock();             //\r\n    create_bonus_bar();         //\r\n    create_player();            //\r\n    create_missiles();          \r\n    create_bonuses();\r\n    create_lose_bar();\r\n    create_win_bar();\r\n    create_custom_menu();\r\n    create_pause_button();\r\n    create_home_button();\r\n    create_sure_bar();\r\n    create_lifes_bar();         \r\n    create_stars();             //\r\n    create_audio_button();      //\r\n    check_ad();\r\n    //deleteCookie(\"opengamer\");\r\n    //update_cookies();\r\n    get_cookies();\r\n    update_levels();\r\n}\r\n\r\n\r\n\r\n\r\nfunction get_cookies()\r\n{\r\n    var success = 0;\r\n    var cookie;\r\n    const promise1 = _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default().send('VKWebAppStorageGet', {\r\n        keys: [\r\n          'opengamer'\r\n        ]})\r\n        .then((data) => { \r\n          if (data.keys) {\r\n             cookie = data.keys[0].value;\r\n             alert(cookie);\r\n             alert(Object.values(data.keys[0]));\r\n             alert(Object.keys(data.keys[0]));\r\n\r\n            if(cookie)\r\n            {\r\n                alert(1);\r\n\r\n                for(var i = 0; i < 4; i++)\r\n                {\r\n                    open_levels[i + 1] = parseInt(cookie[i]);\r\n                    if(open_levels[i+1] == 1)\r\n                        available_lvl = i%4 + 1;\r\n                }\r\n                for(var i = 4; i < 8; i++)\r\n                {\r\n                    open_plevels[i % 4 + 1] = parseInt(cookie[i]);\r\n                    if(open_plevels[i%4+1] == 1)\r\n                        peaceful_available = i%4 + 1;\r\n                }\r\n                for(var i = 8; i < 12; i++)\r\n                    star_dict[i%4 + 1] = parseInt(cookie[i]);\r\n            }\r\n            else\r\n            {\r\n                open_levels = {1:1,2:0, 3:0, 4:0};\r\n                open_plevels = {1:1, 2:0, 3:0, 4:0};\r\n                star_dict = {1:0,2:0,3:0, 4:0};\r\n            }\r\n           success = 1;\r\n          }\r\n        })\r\n        .catch((error) => {\r\n            //alert(2);\r\n           \r\n           \r\n           \r\n        });\r\n        alert([Object.values(open_levels), Object.values(open_plevels)]);\r\n\r\n\r\n    /*\r\n    var cookie = localStorage.getItem(\"opengamer\");\r\n    //localStorage.removeItem(\"opengamer\");\r\n    if(cookie)\r\n    {\r\n        for(var i = 0; i < 4; i++)\r\n        {\r\n            open_levels[i + 1] = parseInt(cookie[i]);\r\n            if(open_levels[i+1] == 1)\r\n                available_lvl = i%4 + 1;\r\n        }\r\n        for(var i = 4; i < 8; i++)\r\n        {\r\n            open_plevels[i % 4 + 1] = parseInt(cookie[i]);\r\n            if(open_plevels[i%4+1] == 1)\r\n                peaceful_available = i%4 + 1;\r\n        }\r\n        for(var i = 8; i < 12; i++)\r\n            star_dict[i%4 + 1] = parseInt(cookie[i]);\r\n    }\r\n    else\r\n    {\r\n        open_levels = {1:1,2:0, 3:0, 4:0};\r\n        open_plevels = {1:1, 2:0, 3:0, 4:0};\r\n        star_dict = {1:0,2:0,3:0, 4:0};\r\n    }\r\n    */\r\n  // alert(promise1.keys[0]['value']);\r\n}\r\n\r\nfunction update_cookies()\r\n{\r\n    // level plevel stars\r\n    var cookies = \"\";\r\n    for(var i in open_levels)\r\n        cookies += open_levels[i].toString();\r\n    for(var i in open_plevels)\r\n        cookies += open_plevels[i].toString();\r\n    for(var i in star_dict)\r\n        cookies += star_dict[i].toString();\r\n\r\n    //localStorage.setItem(\"opengamer\", cookies);\r\n    _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default().send('VKWebAppStorageSet', {\r\n        key: 'opengamer',\r\n        value: cookies\r\n       })\r\n       .then((data) => { \r\n         if (data.result) {\r\n           // Значение переменной задано\r\n         }\r\n       })\r\n       .catch((error) => {\r\n         // Ошибка\r\n         console.log(error);\r\n       });\r\n}\r\nfunction adaptate()\r\n{\r\n    //alert([s_width, s_height]);\r\n\r\n    if(s_width < 800)\r\n    {\r\n        mobile_mode = 1;\r\n        \r\n    }\r\n    else\r\n    {\r\n    \r\n    }\r\n}\r\n\r\n\r\nfunction create_ad_warning()\r\n{\r\n    const adlem = document.createElement(\"div\");\r\n    adlem.id = \"adWarning\";\r\n    adlem.style.position = \"absolute\";\r\n    adlem.style.background = \"url('./images/cat_warning.jpg')\";\r\n    //alert(adlem.style.background);\r\n    adlem.style.border = \"3px solid black\";\r\n    adlem.style.width = ad_width + \"px\";\r\n    adlem.style.height = ad_height + \"px\";\r\n    adlem.style.marginTop = \"100px\";\r\n    adlem.style.display = \"none\";\r\n    adlem.style.zIndex = \"1000\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(adlem);\r\n    wind.style.overflow = \"hidden\";\r\n}\r\n\r\nfunction create_audio_button()\r\n{\r\n    const home = document.getElementById(\"homeBtn\");\r\n    //alert(home.id);\r\n    const audio = document.createElement(\"audio\");\r\n    audio.id = \"audio\";\r\n    audio.setAttribute('src', './audios/main_theme.mp3');\r\n    audio.loop = true;\r\n    const music = document.createElement(\"div\");\r\n    music.id = \"music\";\r\n    music.style.position = \"absolute\";\r\n    music.style.width = parseInt(music_width*(coef_x+ coef_y)/2) + \"px\";\r\n    music.style.height = parseInt(music_height*(coef_x+ coef_y)/2) + \"px\";\r\n    music.style.background = \"url('./images/music_on2.svg')\";\r\n    music.style.backgroundSize = \"cover\";\r\n    music.style.backgroundRepeat = \"no-repeat\";\r\n    //music.style.borderRadius = \"50%\";\r\n    music.style.marginLeft = (vk_width - parseInt(music.style.width) - parseInt(coef_x * 10)) + \"px\";\r\n    music.style.marginTop =  (parseInt(home.style.marginTop) - parseInt(1.5 * parseInt(music.style.height))) + \"px\";\r\n    music.style.opacity = \"0.8\";\r\n    music.onclick = music_clicked;\r\n    music.onmouseover = mouse_over_music;\r\n    music.onmouseout = mouse_out_music;\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(audio);\r\n    wind.appendChild(music);\r\n    audio.play();\r\n}\r\n\r\nfunction mouse_over_music(event)\r\n{\r\n    const music = event.target;\r\n    music.style.opacity = \"1\";\r\n    music.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_music(event)\r\n{\r\n    const music = event.target;\r\n    music.style.opacity = \"0.8\";\r\n    music.style.cursor = \"default\";\r\n}\r\n\r\nfunction music_clicked()\r\n{\r\n    const music = document.getElementById(\"music\");\r\n    const audio = document.getElementById(\"audio\");\r\n    if(music_on == 1)\r\n    {\r\n        music_on = 0;\r\n        audio.pause();\r\n        music.style.background = \"url('./images/music_off2.svg')\";\r\n        music.style.backgroundSize = \"cover\";\r\n        music.style.backgroundRepeat = \"no-repeat\";\r\n    }\r\n    else\r\n    {\r\n        music_on = 1;\r\n        music.style.background = \"url('./images/music_on2.svg')\";\r\n        music.style.backgroundSize = \"cover\";\r\n        music.style.backgroundRepeat = \"no-repeat\";\r\n        audio.setAttribute('src', last_song);\r\n        audio.loop = \"true\";\r\n        audio.play();\r\n    }\r\n}\r\nfunction set_main_theme()\r\n{\r\n        const audio = document.getElementById(\"audio\");\r\n        audio.setAttribute('src', './audios/main_theme.mp3');\r\n        last_song = './audios/main_theme.mp3';\r\n        audio.currentTime = 0;\r\n        if(music_on)\r\n            audio.play();\r\n}\r\n\r\nfunction set_play_theme()\r\n{\r\n    const audio = document.getElementById(\"audio\");\r\n    audio.setAttribute('src', './audios/play_theme.mp3');\r\n    audio.currentTime = 0;\r\n    last_song = './audios/play_theme.mp3';\r\n    if(music_on)\r\n        audio.play();\r\n}\r\n\r\nfunction create_stars()\r\n{\r\n    for(var j = 1; j <= 5; j++)\r\n    {\r\n        const starBar = document.createElement(\"div\");\r\n        starBar.id = \"starBar\" + j;\r\n        starBar.style.position = 'absolute';\r\n        starBar.style.width = \"auto\";\r\n        starBar.style.height = \"auto\";\r\n        //starBar.style.border = \"1px solid black\";\r\n        for(var i = 1; i <= 3; i++)\r\n        {\r\n            const starlem = document.createElement(\"div\");\r\n            starlem.id = j + \"s\" + i;\r\n\r\n            starlem.style.position = \"relative\";\r\n            starlem.style.width = parseInt((coef_x)*1.3 * star_width) + \"px\";\r\n            starlem.style.height = parseInt((coef_x) *1.3* star_height) + \"px\";\r\n            //starlem.style.display = \"inline-block\";\r\n            starlem.style.background = gray_path_value;\r\n            starlem.style.backgroundSize = \"cover\";\r\n            starlem.style.backgroundRepeat = \"no-repeat\";\r\n            starlem.style.display = \"none\";\r\n            starBar.appendChild(starlem);\r\n        }\r\n\r\n        starBar.style.display = \"none\";\r\n        const wind = document.getElementById(\"window\");\r\n        wind.appendChild(starBar);\r\n    }\r\n}\r\n\r\nfunction hide_stars()\r\n{\r\n    for(var i = 1; i <= 5; i++)\r\n    {\r\n        const starBar = document.getElementById(\"starBar\" + i);\r\n        starBar.style.display = \"none\";\r\n    }\r\n}\r\n\r\nfunction display_stars()\r\n{\r\n    const plvpage = document.getElementById(\"plevelPage\");\r\n    var rectpage = plvpage.getBoundingClientRect();\r\n    for(var i = 1; i <= min_v(3, peaceful_available); i++)\r\n    {\r\n        const lvl = document.getElementById(\"p\" + num_to_level[i]);\r\n        const starbar = document.getElementById(\"starBar\" + i);\r\n        var star_num = star_dict[i];\r\n        var rect = lvl.getBoundingClientRect();\r\n        starbar.style.display = \"block\";\r\n        for(var j = 1; j <= 3; j++)\r\n        {\r\n            const elem = document.getElementById(i + \"s\" + j);\r\n            if(j <= star_num)\r\n                elem.style.background = gold_path_value;\r\n            else\r\n                elem.style.backround = gray_path_value;\r\n            elem.style.backgroundSize = \"cover\";\r\n            elem.style.backgroundRepeat = \"no-repeat\";\r\n            elem.style.display = \"inline-block\";\r\n        }\r\n        const star = document.getElementById(\"1s1\");\r\n\r\n        starbar.style.marginLeft =   parseInt(rectpage.right - 3  * parseInt(star.style.width) - (coef_x*1.3) * 30) + \"px\";\r\n        starbar.style.marginTop = rect.top + ((rect.bottom - rect.top)  - parseInt(star.style.height)) / 2 + \"px\";\r\n    }\r\n}\r\n\r\nfunction display_animated_stars()\r\n{\r\n    const winbar = document.getElementById(\"winBar\");\r\n    const starbar = document.getElementById(\"starBar5\");\r\n    const mainlem = document.getElementById(\"mainBtn\");\r\n    const star = document.getElementById(5 + \"s\" + 1);\r\n\r\n    var rect = winbar.getBoundingClientRect();\r\n    var rect2 = mainlem.getBoundingClientRect();\r\n    //starbar.style.marginLeft =  parseInt((rect.right - rect.left - 3* parseInt(star.style.width))/2) + \"px\";\r\n    //starbar.style.marginTop = rect2.top - parseInt(star.style.height) - 5 + \"px\";\r\n    starbar.style.display = \"inline-block\";\r\n    starbar.style.position = \"relative\";\r\n    starbar.style.width = \"100%\";\r\n    starbar.style.marginTop = \"10px\";\r\n    //starbar.style.border = \"1px solid red\";\r\n    winbar.insertBefore(starbar, mainlem);\r\n\r\n    for(var i = 1; i <= 3; i++)\r\n    {\r\n        const star = document.getElementById(5 + \"s\" + i);\r\n        if(i <= player_lifes)\r\n            star.style.background = gold_path_value;\r\n        else\r\n            star.style.background = gray_path_value;\r\n        star.style.backgroundSize = \"cover\";\r\n        star.style.width = parseInt(star.style.width) * 1.4 + \"px\";\r\n        star.style.height = parseInt(star.style.height) * 1.4 + \"px\";\r\n        star.style.backgroundRepeat = \"no-repeat\";\r\n        star.style.opacity = \"0\";\r\n        star.style.display = \"inline-block\";\r\n    }\r\n    starbar.style.display = \"block\";\r\n    //starbar.style.border = \"1px solid black\";\r\n    \r\n    \r\n    var star1id = setTimeout(show_first_star, 500)\r\n    var star2id = setTimeout(show_second_star, 1000);\r\n    var star3id = setTimeout(show_third_star, 1500);\r\n    clearInterval(change1_id);\r\n    clearInterval(change2_id);\r\n    clearInterval(change3_id);\r\n    \r\n}\r\n\r\nfunction show_first_star()\r\n{\r\n    change1_id = setInterval(change_first_opacity, 10);\r\n}\r\n\r\nfunction show_second_star()\r\n{\r\n    change2_id = setInterval(change_second_opacity, 10);\r\n}\r\n\r\nfunction show_third_star()\r\n{\r\n    change3_id = setInterval(change_third_opacity, 10);\r\n}\r\n\r\nfunction change_first_opacity()\r\n{\r\n    const star = document.getElementById(\"5s1\");\r\n    var op = parseFloat(star.style.opacity) + 0.02;\r\n    if(op <= 1)\r\n    {\r\n        star.style.opacity = op ;\r\n    }\r\n    else\r\n        clearInterval(change1_id);\r\n}\r\n\r\n\r\nfunction change_second_opacity()\r\n{\r\n    const star = document.getElementById(\"5s2\");\r\n    var op = parseFloat(star.style.opacity) + 0.02;\r\n    if(op <= 1)\r\n        star.style.opacity = op;\r\n    else\r\n        clearInterval(change2_id);\r\n \r\n}\r\n\r\n\r\nfunction change_third_opacity()\r\n{\r\n    const star = document.getElementById(\"5s3\");\r\n    var op = parseFloat(star.style.opacity) + 0.02;\r\n    if(op <= 1)\r\n        star.style.opacity = op;\r\n    else\r\n        clearInterval(change3_id);\r\n \r\n}\r\n\r\nfunction create_pause_button()\r\n{\r\n    const pause = document.createElement(\"div\");\r\n    pause.id = \"pauseBtn\";\r\n    pause.style.position = \"absolute\";\r\n    pause.style.display = \"inline\";\r\n    pause.style.width = parseInt((coef_x + coef_y)/2 * pause_width) + \"px\";\r\n    pause.style.height = parseInt((coef_x+coef_y)/2 * pause_height) + \"px\";\r\n    pause.style.background = \"url('./images/pause_icon2.svg')\";\r\n    pause.style.backgroundSize = \"cover\";\r\n    pause.style.backgroundRepeat = \"no-repeat\";\r\n    pause.style.borderRadius = \"50%\";\r\n    pause.style.marginLeft = vk_width - parseInt(pause.style.width) - parseInt(coef_x * 10) + \"px\";\r\n    pause.style.marginTop = parseInt(vk_height/2) - parseInt(pause.style.height) + \"px\";\r\n    pause.onclick = pause_clicked;\r\n    pause.onmouseover = mouse_over_pause;\r\n    pause.onmouseout = mouse_out_pause;\r\n\r\n    pause.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(pause);\r\n\r\n}\r\n\r\nfunction pause_clicked()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        game_status = 2;\r\n        const pause = document.getElementById(\"pauseBtn\");\r\n        pause.style.background = \"url('./images/play_icon2.svg')\";\r\n        pause.style.backgroundSize = \"cover\";\r\n        pause.style.backgroundRepeat = \"no-repeat\";\r\n    }\r\n    else if(game_status == 2)\r\n    {\r\n        game_status = 1;\r\n        const pause = document.getElementById(\"pauseBtn\");\r\n        pause.style.background = \"url('./images/pause_icon.svg')\";\r\n        pause.style.backgroundSize = \"cover\";\r\n        pause.style.backgroundRepeat = \"no-repeat\";\r\n    }\r\n\r\n}\r\n\r\nfunction create_lifes_bar()\r\n{\r\n    const lifes = document.createElement(\"div\");\r\n    lifes.id = \"lifesBar\";\r\n    lifes.style.position = \"absolute\";\r\n    lifes.style.marginLeft = parseInt(coef_x * 775) + \"px\";\r\n    lifes.style.width = parseInt( (coef_x + coef_y ) /2 * heart_width) + \"px\";\r\n    lifes.style.height = parseInt((coef_x + coef_y ) /2 * heart_height ) + \"px\";\r\n\r\n    lifes.style.background = \"url('./images/heart_icon4.svg')\";\r\n    lifes.style.backgroundSize = \"cover\";\r\n    lifes.style.backgroundRepeat = \"no-repeat\";\r\n    lifes.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    const lc = document.createElement(\"div\");\r\n    lc.id = \"lifesCounter\";\r\n    lc.style.position = \"absolute\";\r\n    lc.style.marginTop = parseInt(lifes.style.marginTop) + parseInt(lifes.style.height)  + \"px\";\r\n    lc.style.marginLeft = parseInt(lifes.style.marginLeft) + 10 + \"px\";\r\n    lc.innerText = \"x3\";\r\n    lc.style.fontSize = (coef_x + coef_y) * 1.2 + \"em\";\r\n    lc.style.display = \"none\";\r\n    lifes.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(lifes);\r\n    wind.appendChild(lc);\r\n\r\n}\r\n\r\nfunction create_plevel_page()\r\n{\r\n    var t = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    const levels = document.createElement(\"div\");\r\n    levels.id = \"plevelPage\";\r\n    levels.style.marginLeft = \"13%\";\r\n    levels.style.width = \"70%\";\r\n    levels.style.height = \"auto\";\r\n    levels.innerText = \"Выберите уровень\";\r\n    levels.style.fontSize = (coef_x  + coef_y)*0.9+ \"em\";\r\n    levels.style.background = \"rgba(255,255,255,0.8)\";\r\n    levels.style.border = \"3px solid black\";\r\n    levels.style.padding = t;\r\n    levels.style.textAlign = \"center\";\r\n    levels.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    levels.style.position = \"absolute\";\r\n\r\n    const easy = document.createElement(\"div\");\r\n    easy.id = \"peasy\";\r\n    easy.style.position = \"relative\";\r\n    easy.innerText = \"Легкий\";\r\n    easy.style.width = \"90%\";\r\n    easy.style.marginLeft = \"3%\";\r\n    easy.onclick = level_chosen;\r\n    easy.onmouseover = mouse_over_level;\r\n    easy.onmouseout = mouse_out_level;\r\n    easy.style.background = \"#3e7\";\r\n    easy.style.padding = t;\r\n    easy.style.marginTop = parseInt(coef_y *30) +\"px\";\r\n    easy.style.display = \"block\";\r\n    easy.style.borderRadius = \"5%\";\r\n\r\n    const med = document.createElement(\"div\");\r\n    med.id = \"pmedium\";\r\n    med.style.position = \"relative\";\r\n    med.innerText = \"Средний\";\r\n    med.style.width = \"90%\";\r\n    med.style.marginLeft = \"3%\";\r\n    med.onclick = level_chosen;\r\n    med.onmouseover = mouse_over_level;\r\n    med.onmouseout = mouse_out_level;\r\n    med.style.background = \"#777\";\r\n    med.style.padding = t;\r\n    med.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    med.style.display = \"block\";\r\n    med.style.borderRadius = \"5%\";\r\n\r\n    const hard = document.createElement(\"div\");\r\n    hard.id = \"phard\";\r\n    hard.style.position = \"relative\";\r\n    hard.innerText = \"Сложный\";\r\n    hard.style.width = \"90%\";\r\n    hard.style.marginLeft = \"3%\";\r\n    hard.onclick = level_chosen;\r\n    hard.onmouseover = mouse_over_level;\r\n    hard.onmouseout = mouse_out_level;\r\n    hard.style.background = \"#777\";\r\n    hard.style.padding = t;\r\n    hard.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    hard.style.display = \"block\";\r\n    hard.style.borderRadius = \"5%\";\r\n\r\n    const custom = document.createElement(\"div\");\r\n    custom.id = \"pcustom\";\r\n    custom.style.position = \"relative\";\r\n    custom.innerText = \"Пользовательский\";\r\n    custom.style.width = \"90%\";\r\n    custom.style.marginLeft = \"3%\";\r\n    custom.onclick = level_chosen;\r\n    custom.onmouseover = mouse_over_level;\r\n    custom.onmouseout = mouse_out_level;\r\n    custom.style.background = \"#777\";\r\n    custom.style.padding = t;\r\n    custom.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    custom.style.display = \"block\";\r\n    custom.style.borderRadius = \"5%\";\r\n    custom.style.marginBottom = \"10px\";\r\n\r\n    levels.style.display = \"none\";\r\n    levels.appendChild(easy);\r\n    levels.appendChild(med);\r\n    levels.appendChild(hard);\r\n    levels.appendChild(custom);\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(levels);\r\n\r\n}\r\n\r\n\r\n\r\n\r\nfunction create_sure_bar()\r\n{\r\n    const sure = document.createElement(\"div\");\r\n    sure.id = \"sureBar\";\r\n    //sure.style.marginLeft = parseInt(coef_x * 200) + \"px\";\r\n    sure.style.marginLeft = \"20%\";\r\n    //sure.style.width = parseInt(coef_x * sure_width) + \"px\";\r\n    sure.style.width = \"50%\";\r\n    //sure.style.height = parseInt(coef_y * sure_height) + \"px\";\r\n    sure.style.height = \"auto\";\r\n    sure.style.fontSize = (coef_x + coef_y) + \"em\";\r\n    sure.style.background = \"#fff\";\r\n    sure.style.border = \"3px solid black\";\r\n    sure.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    sure.style.textAlign = \"center\";\r\n    //sure.style.marginTop = parseInt(coef_y *250) + \"px\";\r\n    sure.style.marginTop = parseInt(vk_height * 0.35) + \"px\";\r\n    sure.style.position = \"absolute\";\r\n\r\n    const par = document.createElement(\"div\");\r\n    par.id = \"sureText\";\r\n    par.innerText = \"Вы уверены?\";\r\n    par.style.position = \"relative\";\r\n    par.style.width = \"100%\";\r\n    par.style.display = \"block\";\r\n    par.style.marginBottom = \"5px\";\r\n\r\n    const yeslem = document.createElement(\"div\");\r\n    yeslem.id = \"yesSure\";\r\n    yeslem.style.position = \"relative\";\r\n   // yeslem.innerText = \"В меню\";\r\n    //yeslem.style.width = \"auto\";\r\n    yeslem.style.marginLeft = \"0\";\r\n    yeslem.onclick = yes_sure;\r\n    yeslem.onmouseover = mouse_over_yes;\r\n    yeslem.onmouseout = mouse_out_yes;\r\n    yeslem.style.background = \"#39f\";\r\n    yeslem.style.fontSize =  min_v(coef_x,coef_y)+ \"em\";\r\n    yeslem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    yeslem.style.width = \"40%\";\r\n    yeslem.style.display = \"inline-block\";\r\n    /*\r\n    yeslem.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    yeslem.style.marginBottom = parseInt(coef_y * 10) + \"px\";\r\n    yeslem.style.height = parseInt(coef_y * 30) + \"px\";\r\n    yeslem.style.lineHeight = parseInt(coef_y * 30) + \"px\";\r\n    yeslem.style.verticalAlign = \"middle\";\r\n    yeslem.style.display = \"inline\";\r\n    yeslem.style.borderRadius = \"5%\";\r\n*/\r\n    const yestext = document.createElement(\"span\");\r\n    yestext.id = 'yestext';\r\n    yestext.onclick = yes_sure;\r\n    yestext.innerText = \"В меню\";\r\n    yestext.style.display = \"inline-block\";\r\n    yestext.style.transform = \"scale(1, \" + (coef_y / coef_x) + \")\";\r\n    yeslem.appendChild(yestext);\r\n\r\n    const cancel = document.createElement(\"div\");\r\n    cancel.id = \"cancel\";\r\n    cancel.style.marginLeft = \"5%\";\r\n    cancel.onclick = cancel_sure;\r\n    cancel.onmouseover = mouse_over_cancel;\r\n    cancel.onmouseout = mouse_out_cancel;\r\n    cancel.style.background = \"#3e7\";\r\n    cancel.style.fontSize = min_v(coef_x, coef_y) + \"em\";\r\n    cancel.style.width = \"40%\";\r\n    cancel.style.display = \"inline-block\";\r\n    cancel.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n\r\n    /*\r\n    cancel.style.position = \"relative\";\r\n    cancel.style.verticalAlign = \"middle\";\r\n    cancel.style.marginLeft = \"10%\";    \r\n    cancel.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    cancel.style.marginBottom = parseInt(coef_y * 10) + \"px\";\r\n    cancel.style.lineHeight = parseInt(coef_y * 30) + \"px\";\r\n    cancel.style.height = parseInt(coef_y * 30) + \"px\";\r\n    cancel.style.display = \"inline\";\r\n    cancel.style.borderRadius = \"5%\";\r\n*/\r\n\r\n    const canceltext = document.createElement(\"span\");\r\n    canceltext.id = 'canceltext';\r\n    canceltext.onclick = cancel_sure;\r\n    canceltext.innerText = \"Отмена\";\r\n    canceltext.style.display = \"inline-block\";\r\n    canceltext.style.transform = \"scale(1, \" + (coef_y / coef_x) + \")\";\r\n    cancel.appendChild(canceltext);\r\n    \r\n    yeslem.appendChild(yestext);\r\n    sure.style.display = \"none\";\r\n    sure.appendChild(par);\r\n    sure.appendChild(yeslem);\r\n    sure.appendChild(cancel);\r\n\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(sure);\r\n}\r\n\r\nfunction yes_sure()\r\n{\r\n    const sure = document.getElementById(\"sureBar\");\r\n    sure.style.display = \"none\";\r\n    game_status = 0;\r\n    set_main_theme();\r\n    home_clicked();\r\n}\r\n\r\nfunction cancel_sure()\r\n{\r\n    const gf = document.getElementById(\"gameField\");\r\n    gf.style.opacity = \"1.0\";\r\n    const sure = document.getElementById(\"sureBar\");\r\n    sure.style.display = \"none\";\r\n    game_status = 1;\r\n}\r\n\r\nfunction mouse_over_cancel()\r\n{\r\n    const cancel = document.getElementById(\"cancel\");\r\n    cancel.style.cursor = \"pointer\";\r\n    cancel.style.border = \"1px solid black\";\r\n}\r\n\r\nfunction mouse_out_cancel()\r\n{\r\n    const cancel = document.getElementById(\"cancel\");\r\n    cancel.style.cursor = \"default\";\r\n    cancel.style.border = \"none\";\r\n}\r\n\r\n\r\nfunction mouse_over_yes()\r\n{\r\n    const yeslem = document.getElementById(\"yesSure\");\r\n    yeslem.style.cursor = \"pointer\";\r\n    yeslem.style.border = \"1px solid black\";\r\n}\r\n\r\nfunction mouse_out_yes()\r\n{\r\n    const yeslem = document.getElementById(\"yesSure\");\r\n    yeslem.style.cursor = \"default\";\r\n    yeslem.style.border = \"none\";\r\n\r\n}\r\n\r\nfunction mouse_over_pause()\r\n{\r\n    const pause = document.getElementById(\"pauseBtn\");\r\n    pause.style.cursor = \"pointer\";\r\n    pause.style.border = \"1px solid black\";\r\n}\r\n\r\nfunction mouse_out_pause()\r\n{\r\n    const pause = document.getElementById(\"pauseBtn\");\r\n    pause.style.cursor = \"default\";\r\n    pause.style.border = \"none\";\r\n}\r\n\r\n\r\nfunction create_home_button()\r\n{\r\n    const home = document.createElement(\"div\");\r\n    home.id = \"homeBtn\";\r\n    home.style.position = \"absolute\";\r\n    home.style.display = \"inline\";\r\n    home.style.width = parseInt((coef_x+ coef_y) / 2 * home_width) + \"px\";\r\n    home.style.height = parseInt((coef_x + coef_y)/2* home_height) + \"px\";\r\n    home.style.background = \"url('./images/home_icon2.svg')\";\r\n    //alert([home.style.width, home.style.height]);\r\n    home.style.backgroundSize = \"cover\";\r\n    home.style.backgroundRepeat = \"no-repeat\";\r\n    home.style.borderRadius = \"50%\";\r\n    home.style.opacity = \"0.8\";\r\n    home.style.marginLeft = (vk_width  - parseInt(coef_x * 10) - parseInt(home.style.width)) + \"px\";\r\n    home.style.marginTop = parseInt(coef_y * 600) + \"px\";\r\n    home.onclick = home_clicked;\r\n    home.onmouseover = mouse_over_home;\r\n    home.onmouseout = mouse_out_home;\r\n\r\n    //home.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(home);\r\n}\r\n\r\nfunction mouse_over_home()\r\n{\r\n    const home = document.getElementById(\"homeBtn\");\r\n    home.style.opacity = \"1.0\";\r\n    home.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_home()\r\n{\r\n    const home = document.getElementById(\"homeBtn\");\r\n    home.style.opacity = \"0.8\";\r\n    home.style.cursor = \"default\";\r\n}\r\n\r\nfunction home_clicked()\r\n{\r\n    if(game_status == 0)\r\n    {\r\n        //alert(1);\r\n        display_main();\r\n        hide_stars();\r\n        const lvl_page = document.getElementById(\"levelPage\");\r\n        lvl_page.style.display = \"none\";\r\n        const plvl_page = document.getElementById(\"plevelPage\");\r\n        plvl_page.style.display = \"none\";\r\n\r\n        const mainlem = document.getElementById(\"mainPage\");\r\n        mainlem.style.display = \"block\";\r\n    }\r\n    else\r\n    {\r\n        game_status = 0;\r\n        const gf = document.getElementById(\"gameField\");\r\n        gf.style.opacity = \"0.5\";\r\n        const sure = document.getElementById(\"sureBar\");\r\n        sure.style.display = \"block\";\r\n    }\r\n}\r\n\r\n\r\nfunction create_main_page()\r\n{\r\n    const page = document.createElement(\"div\");\r\n    page.id = \"mainPage\";\r\n    page.style.width = \"70%\";\r\n    page.style.marginLeft = \"13%\";\r\n    page.style.height = \"auto\";\r\n    page.innerText = \"Выберите режим игры\";\r\n    page.style.fontSize = (coef_x + coef_y) + \"em\";\r\n    page.style.background = \"rgba(255,255,255,0.8)\";\r\n    page.style.border = \"3px solid black\";\r\n    page.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    page.style.textAlign = \"center\";\r\n    page.style.marginTop = parseInt(200 * coef_y) + \"px\";\r\n    page.style.position = \"absolute\";\r\n\r\n    const peace = document.createElement(\"div\");\r\n    peace.id = \"peaceful\";\r\n    peace.style.position = \"relative\";\r\n    peace.innerText = \"Мирный атом\";\r\n    peace.style.width = \"80%\";\r\n    peace.style.marginLeft = \"7%\";\r\n    peace.onclick = start_peaceful_mode;\r\n    peace.onmouseover = mouse_over_regime;\r\n    peace.onmouseout = mouse_out_regime;\r\n    peace.style.background = \"#1b5\";\r\n    peace.style.padding = parseInt(coef_y * 20) + \"px \" + parseInt(coef_x * 10)+ \"px\";\r\n    peace.style.marginTop = parseInt(coef_y * 30) + \"px\";\r\n    peace.style.height = \"auto\";\r\n    peace.style.display = \"block\";\r\n    peace.style.borderRadius = \"5%\";\r\n\r\n    const surlem = document.createElement(\"div\");\r\n    surlem.id = \"survival\";\r\n    surlem.style.position = \"relative\";\r\n    surlem.innerText = \"Вспышка сверху\";\r\n    surlem.style.width = \"80%\";\r\n    surlem.style.marginLeft = \"7%\";\r\n    surlem.onclick = choose_survival;\r\n    surlem.onmouseover = mouse_over_regime;\r\n    surlem.onmouseout = mouse_out_regime;\r\n    surlem.style.background = \"#e37\";\r\n    surlem.style.padding = parseInt(coef_y * 20) + \"px \" + parseInt(coef_x * 10)+ \"px\";\r\n    surlem.style.marginTop = parseInt(coef_y * 30) + \"px\";\r\n    surlem.style.height = \"auto\";\r\n    surlem.style.display = \"block\";\r\n    surlem.style.borderRadius = \"5%\";\r\n    surlem.style.marginBottom = \"10px\";\r\n    page.appendChild(peace);\r\n    page.appendChild(surlem);\r\n\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(page);\r\n    \r\n\r\n}\r\n\r\nfunction create_level_page()\r\n{\r\n    var t = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n\r\n    const levels = document.createElement(\"div\");\r\n    levels.id = \"levelPage\";\r\n    levels.style.marginLeft = \"13%\";\r\n    levels.style.width = \"70%\";\r\n    levels.style.height = \"auto\";\r\n    levels.innerText = \"Выберите уровень\";\r\n    levels.style.fontSize = (coef_x  + coef_y)*0.9+ \"em\";\r\n    levels.style.background = \"rgba(255,255,255,0.8)\";\r\n    levels.style.border = \"3px solid black\";\r\n    levels.style.padding = t;\r\n    levels.style.textAlign = \"center\";\r\n    levels.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    levels.style.position = \"absolute\";\r\n    \r\n    const easy = document.createElement(\"div\");\r\n    easy.id = \"easy\";\r\n    easy.style.position = \"relative\";\r\n    easy.innerText = \"Легкий\";\r\n    easy.style.width = \"90%\";\r\n    easy.style.marginLeft = \"3%\";\r\n    easy.onclick = level_chosen;\r\n    easy.onmouseover = mouse_over_level;\r\n    easy.onmouseout = mouse_out_level;\r\n    easy.style.background = \"#3e7\";\r\n    easy.style.padding = t;\r\n    easy.style.marginTop = parseInt(coef_y *30) +\"px\";\r\n    easy.style.display = \"block\";\r\n    easy.style.borderRadius = \"5%\";\r\n\r\n    const med = document.createElement(\"div\");\r\n    med.id = \"medium\";\r\n    med.style.position = \"relative\";\r\n    med.innerText = \"Средний\";\r\n    med.style.width = \"90%\";\r\n    med.style.marginLeft = \"3%\";\r\n    med.onclick = level_chosen;\r\n    med.onmouseover = mouse_over_level;\r\n    med.onmouseout = mouse_out_level;\r\n    med.style.background = \"#777\";\r\n    med.style.padding = t;\r\n    med.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    med.style.display = \"block\";\r\n    med.style.borderRadius = \"5%\";\r\n\r\n    const hard = document.createElement(\"div\");\r\n    hard.id = \"hard\";\r\n    hard.style.position = \"relative\";\r\n    hard.innerText = \"Сложный\";\r\n    hard.style.width = \"90%\";\r\n    hard.style.marginLeft = \"3%\";\r\n    hard.onclick = level_chosen;\r\n    hard.onmouseover = mouse_over_level;\r\n    hard.onmouseout = mouse_out_level;\r\n    hard.style.background = \"#777\";\r\n    hard.style.padding = t;\r\n    hard.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    hard.style.display = \"block\";\r\n    hard.style.borderRadius = \"5%\";\r\n\r\n    const custom = document.createElement(\"div\");\r\n    custom.id = \"custom\";\r\n    custom.style.position = \"relative\";\r\n    custom.innerText = \"Пользовательский\";\r\n    custom.style.width = \"90%\";\r\n    custom.style.marginLeft = \"3%\";\r\n    custom.onclick = level_chosen;\r\n    custom.onmouseover = mouse_over_level;\r\n    custom.onmouseout = mouse_out_level;\r\n    custom.style.background = \"#777\";\r\n    custom.style.padding = t;\r\n    custom.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    custom.style.display = \"block\";\r\n    custom.style.borderRadius = \"5%\";\r\n    custom.style.marginBottom = \"10px\";\r\n    levels.style.display = \"none\";\r\n    levels.appendChild(easy);\r\n    levels.appendChild(med);\r\n    levels.appendChild(hard);\r\n    levels.appendChild(custom);\r\n\r\n\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(levels);\r\n\r\n}\r\n\r\nfunction create_warning()\r\n{\r\n    const warn = document.createElement(\"div\");\r\n    warn.innerText = \"Сначала пройдите предыдущий уровень\";\r\n    warn.style.fontSize = (coef_x + coef_y)+ \"em\";\r\n    warn.style.background = \"#fff\";\r\n    warn.style.border = \"3px solid black\";\r\n    warn.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    warn.style.textAlign = \"center\";\r\n    warn.id = \"warning\";\r\n    warn.style.marginLeft = parseInt(coef_x * 200) + \"px\";\r\n    //warn.style.width = parseInt(coef_x * warning_width) + \"px\";\r\n    warn.style.width = \"50%\";\r\n    warn.style.height = parseInt(coef_y * warning_height) + \"px\";\r\n    warn.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    warn.style.position = \"relative\";\r\n    \r\n    const ok = document.createElement(\"div\");\r\n    ok.id = \"okBtn\";\r\n    ok.style.position = \"absolute\";\r\n    ok.innerText = \"Ок\";\r\n    ok.style.width = \"70%\";\r\n    ok.style.marginLeft = \"10%\";\r\n    //ok.style.marginLeft = \"auto\";\r\n    ok.onclick = clicked_ok;\r\n    ok.onmouseover = mouse_over_ok;\r\n    ok.onmouseout = mouse_out_ok;\r\n    ok.style.background = \"#3e7\";\r\n    ok.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    ok.style.marginTop = parseInt(coef_y * 30) + \"px\";\r\n    ok.style.height = \"auto\";\r\n    ok.style.display = \"block\";\r\n    ok.style.borderRadius = \"5%\";\r\n\r\n    warn.style.display = \"none\";\r\n    warn.appendChild(ok);\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(warn);\r\n\r\n}\r\n\r\n\r\n\r\nfunction mouse_over_ok(event)\r\n{\r\n    const elem = document.elementFromPoint(event.x, event.y);\r\n    elem.style.border = \"2px solid black\"; \r\n    elem.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_ok()\r\n{\r\n    const ok = document.getElementById(\"okBtn\")\r\n    ok.style.border = \"none\";\r\n    ok.style.cursor = \"default\";\r\n}\r\n\r\nfunction clicked_ok()\r\n{\r\n        const lvpage = document.getElementById(\"levelPage\");\r\n        const plvpage = document.getElementById(\"plevelPage\");\r\n        const warn = document.getElementById(\"warning\");\r\n\r\n        warn.style.display = \"none\";\r\n        if(regime == \"survival\")\r\n            lvpage.style.display = \"block\";\r\n        else\r\n        {\r\n            plvpage.style.display = \"block\";\r\n            display_stars();\r\n        }\r\n}\r\n\r\nfunction mouse_over_level(event)\r\n{\r\n    const elem = document.elementFromPoint(event.x, event.y);\r\n    elem.style.border = \"2px solid black\"; \r\n    elem.style.cursor = \"pointer\";\r\n    if(regime == \"peaceful\")\r\n    {\r\n        var sid = \"starBar\" + level_dict[elem.id];\r\n        const starbar = document.getElementById(sid);\r\n        var mt = parseInt(starbar.style.marginTop) + 2;\r\n        starbar.style.marginTop = mt + \"px\";\r\n    }\r\n\r\n}\r\n\r\nfunction mouse_out_level(event)\r\n{\r\n    const easy = document.getElementById(\"easy\");\r\n    const med = document.getElementById(\"medium\");\r\n    const hard = document.getElementById(\"hard\");\r\n    const custom = document.getElementById(\"custom\");\r\n    const peasy = document.getElementById(\"peasy\");\r\n    const pmed = document.getElementById(\"pmedium\");\r\n    const phard = document.getElementById(\"phard\");\r\n    const pcustom = document.getElementById(\"pcustom\");\r\n    \r\n    if(regime == \"survival\")\r\n    {\r\n        easy.style.border = \"none\";\r\n        med.style.border = \"none\";\r\n        hard.style.border = \"none\";\r\n        custom.style.border = \"none\";\r\n        easy.style.cursor = \"default\";\r\n        med.style.cursor = \"default\";\r\n        hard.style.cursor = \"default\";\r\n        custom.style.cursor = \"default\";\r\n    }\r\n    else\r\n    {\r\n        peasy.style.border = \"none\";\r\n        pmed.style.border = \"none\";\r\n        phard.style.border = \"none\";\r\n        pcustom.style.border = \"none\";\r\n        peasy.style.cursor = \"default\";\r\n        pmed.style.cursor = \"default\";\r\n        phard.style.cursor = \"default\";\r\n        pcustom.style.cursor = \"default\";\r\n        if(event.target.id != \"pcustom\")\r\n        {\r\n            var sid = \"starBar\" + level_dict[event.target.id];\r\n            const starbar = document.getElementById(sid);\r\n            var mt = parseInt(starbar.style.marginTop) - 2;\r\n            starbar.style.marginTop = mt + \"px\";\r\n        }\r\n    \r\n    }\r\n\r\n}\r\n\r\nfunction mouse_over_regime(event)\r\n{\r\n    const elem = document.elementFromPoint(event.x, event.y);\r\n\r\n    elem.style.border = \"2px solid black\"; \r\n    elem.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_regime(event)\r\n{\r\n    const elem = document.getElementById(\"peaceful\")\r\n    const elem2 = document.getElementById(\"survival\");\r\n    elem2.style.border = \"none\";\r\n    elem2.style.cursor = \"default\";\r\n    elem.style.border = \"none\";\r\n    elem.style.cursor = \"default\";\r\n    \r\n}\r\n\r\n\r\nfunction level_chosen(event)\r\n{\r\n    const lvl = document.elementFromPoint(event.x, event.y);\r\n    const lvpage = document.getElementById(\"levelPage\");\r\n    const plvpage = document.getElementById(\"plevelPage\");\r\n    hide_stars();\r\n    plvpage.style.display = \"none\";\r\n    lvpage.style.display = \"none\";\r\n\r\n    temp_lvl = available_lvl;\r\n    if(regime == \"peaceful\")\r\n        temp_lvl = peaceful_available;\r\n    if(level_dict[lvl.id] > temp_lvl)\r\n    {\r\n        //alert([temp_lvl, available_lvl, level_dict[lvl.id]]);\r\n        const warn = document.getElementById(\"warning\");\r\n        warn.style.display = \"block\";\r\n    }\r\n    else\r\n    {\r\n        current_lvl = level_dict[lvl.id];\r\n\r\n        if(current_lvl == 4)\r\n        {\r\n            const cuslem = document.getElementById(\"customMenu\");\r\n            const textlem = document.getElementById(\"ptext\");\r\n            if(regime == \"peaceful\")\r\n                textlem.innerText = \"Укажите скорость падения атомов\";\r\n            else\r\n                textlem.innerText = \"Выберите скорость движения ракет\";\r\n            \r\n            cuslem.style.display = \"block\";\r\n        }\r\n        else\r\n        {\r\n            const infolem = document.getElementById(\"info\");\r\n            const textlem = document.getElementById(\"text\");\r\n\r\n            if(regime == \"survival\")\r\n                textlem.innerText = text_60sec;\r\n            else\r\n                textlem.innerText = text_peaceful;\r\n            infolem.style.display = \"block\";\r\n            set_play_theme();\r\n            mis_gen_speed = level_options[current_lvl];\r\n            if(regime == \"peaceful\")\r\n                bon_gen_speed = plevel_options[current_lvl];\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n\r\nfunction create_custom_menu()\r\n{\r\n    const cuslem = document.createElement(\"div\");\r\n    cuslem.id = \"customMenu\";\r\n    //cuslem.innerText = \"Выберите скорость ракет\";\r\n    cuslem.style.fontSize = (coef_x + coef_y) + \"em\";\r\n    cuslem.style.background = \"#fff\";\r\n    cuslem.style.border = \"3px solid black\";\r\n    cuslem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    cuslem.style.textAlign = \"center\";\r\n    cuslem.style.marginLeft = parseInt(coef_x * 200) + \"px\";\r\n    cuslem.style.width = custom_menu_width + \"px\";\r\n    cuslem.style.height = custom_menu_height + \"px\";;\r\n    cuslem.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    cuslem.style.position = \"relative\";\r\n    \r\n    const textlem = document.createElement(\"div\");\r\n    textlem.id = \"ptext\";\r\n    textlem.style.position = \"absolute\";\r\n    textlem.style.fontSize = (coef_x + coef_y) /2 * 0.8 + \"em\";\r\n    textlem.style.width = \"100%\";\r\n    textlem.style.height = \"auto\";\r\n        \r\n\r\n    const range = document.createElement(\"input\");\r\n    range.id = \"range\";\r\n    range.style.position = \"absolute\";\r\n    range.setAttribute('type', 'range');\r\n    range.setAttribute('min', '0');\r\n    range.setAttribute('max', '100');\r\n    range.setAttribute('step', '0.1');\r\n    range.setAttribute('value', '50');\r\n    range.style.width = \"70%\";\r\n    range.style.height = \"auto\";\r\n    range.style.marginLeft = \"10%\";\r\n    range.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    range.style.marginTop = parseInt(coef_y * 130) + \"px\";\r\n    range.style.display = \"block\";\r\n    range.oninput = input_range;\r\n    \r\n    const output = document.createElement(\"output\");\r\n    output.id = \"rangeOutput\";\r\n    output.innerText = \"50\";\r\n    output.style.position = \"absolute\";\r\n    output.style.display = \"block\";\r\n    output.style.width = \"95%\";\r\n    output.style.marginTop = parseInt(coef_y * 90) + \"px\";\r\n    output.textContent = range.value;\r\n    /*\r\n    const outcont = document.createElement(\"div\");\r\n    outcont.style.marginTop = \"40px\";\r\n    outcont.id = \"outputContainer\";\r\n    outcont.appendChild(output);\r\n    */\r\n\r\n    const choose = document.createElement(\"div\");\r\n    choose.id = \"chooseBtn\";\r\n    choose.innerText = \"Выбрать\";\r\n    choose.onclick = speed_chosen;\r\n    choose.style.fontSize = (coef_x + coef_y) / 2 * 1.8 + \"em\";\r\n \r\n    choose.style.position = \"absolute\";\r\n    choose.style.width = \"70%\";\r\n    choose.style.marginLeft = \"10%\";\r\n    choose.onmouseover = mouse_over_choose;\r\n    choose.onmouseout = mouse_out_choose;\r\n    choose.style.background = \"#3e7\";\r\n    choose.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    choose.style.marginTop = parseInt(coef_y * 190) + \"px\";\r\n    choose.style.height = \"auto\";\r\n    choose.style.display = \"block\";\r\n    choose.style.borderRadius = \"5%\";\r\n\r\n    cuslem.style.display = \"none\";\r\n    cuslem.appendChild(textlem);\r\n    cuslem.appendChild(range);\r\n    cuslem.appendChild(output);\r\n    cuslem.appendChild(choose);\r\n\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(cuslem);\r\n\r\n}\r\n\r\nfunction mouse_over_choose(event)\r\n{\r\n    const choose = document.elementFromPoint(event.x, event.y);\r\n\r\n    choose.style.border = \"2px solid black\"; \r\n    choose.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_choose()\r\n{\r\n    const choose = document.getElementById(\"chooseBtn\");\r\n    choose.style.cursor = \"default\";\r\n    choose.style.border = \"none\";\r\n\r\n}\r\n\r\nfunction speed_chosen()\r\n{\r\n    const output = document.getElementById(\"rangeOutput\");\r\n    var val = output.value;\r\n    if(val == 0)\r\n    {\r\n        peaceful_mode = 1;\r\n        if(regime == \"peaceful\")\r\n        {\r\n            zero_atoms = 1;\r\n        }\r\n    }\r\n    else if(regime == \"survival\")\r\n    {\r\n        mis_gen_speed = 7 + parseInt(10000 / val);\r\n        if(mis_gen_speed % 2 == 0)\r\n            mis_gen_speed += 1;\r\n    }\r\n    else\r\n    {   \r\n        \r\n        bon_gen_speed = 7 + parseInt(3000 / val);\r\n        if(bon_gen_speed % 2 == 0)\r\n            bon_gen_speed += 1;\r\n    }\r\n    const cuslem = document.getElementById(\"customMenu\");\r\n    const infolem = document.getElementById(\"info\");\r\n    cuslem.style.display = \"none\";\r\n    infolem.style.display = \"block\";\r\n    set_play_theme();\r\n\r\n}\r\n\r\nfunction input_range(event)\r\n{\r\n    const range = document.getElementById(\"range\");\r\n    const output = document.getElementById(\"rangeOutput\");\r\n\r\n    output.textContent = event.target.value;\r\n   // output.value = range.value;\r\n}\r\n\r\nfunction choose_survival()\r\n{\r\n    regime = \"survival\";\r\n    peaceful_mode = 0;\r\n    const page = document.getElementById(\"mainPage\");\r\n    page.style.display = \"none\";\r\n    const levels = document.getElementById(\"levelPage\");\r\n    levels.style.display = \"block\";\r\n}\r\n\r\n\r\nfunction start_peaceful_mode()\r\n{\r\n    regime = \"peaceful\";\r\n    peaceful_mode = 1;\r\n    const page = document.getElementById(\"mainPage\");\r\n    page.style.display = \"none\"; // legend: ловите атомы до того как они упадут на землю. Допускается пропустить 2 атома. Управление зажатым курсором, пальцем, клавишами wasd, пауза пробел. Удачи!\r\n    /*\r\n    const textlem = document.getElementById(\"text\");\r\n    const info = document.getElementById(\"info\");\r\n    textlem.innerText = text_peaceful;\r\n    info.style.display = \"block\";\r\n    */\r\n    const plvl_page = document.getElementById(\"plevelPage\");\r\n    plvl_page.style.display = \"block\";\r\n    display_stars();\r\n    //const startlem = document.getElementById(\"startBtn\");\r\n    //startlem.style.display = \"block\";\r\n}\r\n\r\nfunction create_start_and_info()\r\n{\r\n    const infolem = document.createElement(\"div\");\r\n    infolem.id = \"info\";\r\n    infolem.style.position = \"absolute\";\r\n    infolem.style.display = \"block\";\r\n    infolem.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    infolem.style.width = parseInt(coef_x * info_width) + \"px\";\r\n    //infolem.style.height = parseInt(coef_y * info_height) + \"px\";\r\n    infolem.style.height = \"auto\";\r\n    infolem.style.border = \"3px solid black\";\r\n    //infolem.style.textAlign = \"center\";\r\n    infolem.style.background = \"rgba(255,255,255,0.8)\";\r\n    infolem.style.marginLeft = parseInt(100 * coef_x) + \"px\";\r\n    infolem.style.padding = parseInt(coef_y * 20)+ \"px \" + parseInt(coef_x * 20) + \"px\"; \r\n    infolem.style.fontSize = (coef_x+coef_y) / 2 * 1.5 + \"em\";\r\n    const textlem = document.createElement(\"div\");\r\n    textlem.id = \"text\";\r\n    //textlem.innerText = text_60sec;\r\n    textlem.style.position = \"absolute\";\r\n    textlem.style.width = \"100%\";\r\n    textlem.style.height = \"auto\";\r\n    \r\n    const startlem = document.createElement(\"button\");\r\n    startlem.id = \"startBtn\";\r\n    startlem.onclick = new_game;\r\n    startlem.innerText = \"Поехали!\";\r\n    startlem.style.marginLeft  = parseInt(coef_x * 200) + \"px\";\r\n    startlem.style.marginTop = parseInt(coef_y * 200) + \"px\";\r\n    startlem.style.display = \"block\";\r\n    startlem.style.padding = parseInt(coef_y * 20)+ \"px \" + parseInt(coef_x * 20) + \"px\"; \r\n    startlem.style.fontSize = (coef_x + coef_y) / 2 * 1.6 + \"em\";\r\n    startlem.style.position = \"relative\";\r\n    startlem.style.border = \"3px solid black\";\r\n    startlem.style.background = \"#a2f5b4\";\r\n    startlem.style.borderRadius = \"20%\";\r\n    startlem.onmouseover = mouse_over_start;\r\n    startlem.onmouseout = mouse_out_start;\r\n\r\n    infolem.appendChild(textlem);\r\n    const wind = document.getElementById(\"window\");\r\n    infolem.style.display = \"none\";\r\n    infolem.appendChild(startlem);\r\n    wind.appendChild(infolem);\r\n\r\n}\r\n\r\nfunction mouse_over_start()\r\n{\r\n    const startlem = document.getElementById(\"startBtn\");\r\n     startlem.style.background = \"blue\";\r\n     startlem.style.cursor = \"pointer\";\r\n     startlem.style.color = \"white\";\r\n}\r\n\r\nfunction mouse_out_start()\r\n{\r\n    const startlem = document.getElementById(\"startBtn\");\r\n    startlem.style.background = \"#a2f5b4\";\r\n    startlem.style.cursor = \"default\";\r\n    startlem.style.color = \"black\";\r\n}\r\n\r\nfunction set_area()\r\n{\r\n   // document.body.style.background = \"url('./images/back.jpg')\";\r\n    document.body.style.background = \"green\";\r\n    document.body.style.overflow = \"hidden\";\r\n    document.body.style.margin = \"0\";\r\n    document.body.style.padding = \"0;\"\r\n    document.body.style.height = \"100%\";\r\n    document.body.style.fontFamily = \"Open Sans\";\r\n    const wind_lem = document.createElement(\"div\");\r\n    wind_lem.id = \"window\";\r\n    //wind_lem.style.marginTop = \"-10px\";\r\n    //wind_lem.style.marginLeft = \"-10px\";\r\n    wind_lem.style.position = \"absolute\";\r\n    wind_lem.style.display = \"block\";\r\n    wind_lem.style.overflow = \"hidden\";\r\n    wind_lem.style.width = vk_width +\"px\";\r\n    wind_lem.style.height = vk_height + \"px\";\r\n    //wind_lem.style.border = \"1px solid blue\";\r\n    wind_lem.style.background = \"url('./images/back_900_750.jpg')\";\r\n    wind_lem.style.backgroundRepeat = \"no-repeat\";\r\n    wind_lem.style.backgroundSize = \"cover\";\r\n    document.body.appendChild(wind_lem);\r\n}\r\n\r\n\r\n\r\nfunction new_game()\r\n{\r\n    date2 = new Date();\r\n    const infolem = document.getElementById(\"info\");\r\n    const gf = document.getElementById(\"gameField\");\r\n    const statlem = document.getElementById(\"clockBar\");\r\n    const belem = document.getElementById(\"bonusBar\");\r\n    const player = document.getElementById(\"player\");\r\n    const pause = document.getElementById(\"pauseBtn\");\r\n    const bc = document.getElementById(\"bonusCounter\");\r\n    if(regime == \"peaceful\")\r\n    {\r\n        const lifes = document.getElementById(\"lifesBar\");\r\n        const lc = document.getElementById(\"lifesCounter\");\r\n        lifes.style.display = \"block\";\r\n        lc.style.display = \"block\";\r\n    }\r\n    bc.style.display = \"block\";\r\n    pause.style.display = \"block\";\r\n    player.style.display = \"block\";\r\n    player.style.opacity = \"1.0\";\r\n    set_body();\r\n    statlem.style.display = \"block\";\r\n    belem.style.display = \"block\";\r\n    infolem.style.display = \"none\";\r\n    gf.style.background  = \"rgba(255, 255, 255, 0.8)\";\r\n    gf.style.display = \"block\";\r\n\r\n    game_status = 1;\r\n    start_clock();\r\n    if(peaceful_mode == 0 && regime == \"survival\")\r\n    {\r\n        var start_mis_id = setTimeout(init_missiles, mis_gen_speed*3);\r\n    }\r\n    \r\n    if(zero_atoms == 0)\r\n        var start_bon_id = setTimeout(init_bonuses, bon_gen_speed);\r\n    \r\n}\r\nfunction set_body()\r\n{\r\n    document.body.onkeydown = key_pressed;\r\n    document.body.onmousemove = mouse_moved;\r\n}\r\nfunction create_game_field()\r\n{\r\n    date4 = new Date();\r\n    const wind = document.getElementById(\"window\");\r\n    const gf = document.createElement(\"div\");\r\n    gf.id = \"gameField\";\r\n    gf.style.position = \"absolute\";\r\n    gf.style.display = \"none\";\r\n    gf.style.width = parseInt(coef_x * gf_width) + \"px\";\r\n    gf.style.background  = \"rgba(255, 255, 255, 0.8)\";\r\n    gf.style.marginLeft = parseInt(coef_x * 30) + \"px\";\r\n    gf.style.marginTop = parseInt(coef_y * 25) + \"px\";\r\n    gf.style.height = parseInt(coef_y * gf_height) + \"px\";\r\n    gf.style.border = \"5px solid black\";\r\n    gf.style.background = gf_color;\r\n    wind.appendChild(gf);\r\n}\r\n\r\n\r\n\r\n\r\nfunction create_clock()\r\n{\r\n    const statlem = document.createElement(\"div\");\r\n    statlem.id = \"clockBar\";\r\n    statlem.style.position = \"absolute\";\r\n    statlem.style.width = \"auto\";\r\n    statlem.innerText = \"01:00\";\r\n    statlem.style.marginLeft = parseInt(coef_x * 775) + \"px\";\r\n    statlem.style.marginTop = parseInt(coef_y * 25) + \"px\";\r\n    statlem.style.fontSize = (coef_x + coef_y) / 2 * 1.5 + \"em\";\r\n    statlem.style.border = \"2px solid black\";\r\n    statlem.style.padding = parseInt(coef_y * 5) +\"px \" + parseInt(coef_x * 5) + \"px\";\r\n    statlem.style.background = \"white\";\r\n    statlem.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(statlem);\r\n}\r\n\r\n\r\nfunction create_bonus_bar()\r\n{\r\n    /*\r\n    const belem = document.createElement(\"div\");\r\n    belem.id = \"bonusBar\";\r\n    belem.style.position = \"absolute\";\r\n    belem.style.marginLeft = parseInt(coef_x * 775) + \"px\";\r\n    belem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    belem.style.background = \"url('./images/atom_icon.jpg')\";\r\n    belem.style.width = parseInt(coef_x * 30) + \"px\";\r\n    belem.style.height = parseInt(coef_x * 30) + \"px\";\r\n    belem.style.border = \"2px solid black\";\r\n    belem.style.borderRadius = \"50%\";\r\n    belem.style.marginTop = parseInt(coef_y * 100) + \"px\";\r\n    const bc = document.createElement(\"div\");\r\n    bc.id = \"bonusCounter\";\r\n    bc.style.fontSize = (coef_x + coef_y) / 2 * 2.7 + \"em\";\r\n    belem.appendChild(bc);\r\n    bc.style.position = \"relative\";\r\n    bc.style.marginLeft = parseInt(coef_x * 50) + \"px\";\r\n    bc.innerText = \"0\";\r\n    bc.style.verticalAlign = \"middle\";\r\n    bc.style.lineHeight =  parseInt(coef_y * 30) + \"px\";\r\n    bc.style.paddingBottom = parseInt(coef_y * 5) + \"px\";\r\n    belem.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(belem);\r\n    */\r\n    const belem = document.createElement(\"div\");\r\n    belem.id = \"bonusBar\";\r\n    belem.style.position = \"absolute\";\r\n    belem.style.marginLeft = parseInt(coef_x * 775) + \"px\";\r\n    belem.style.width = parseInt( 1.2*(coef_x + coef_y ) /2 * bonus_width) + \"px\";\r\n    belem.style.height = parseInt(1.2*(coef_x + coef_y ) /2 * bonus_height ) + \"px\";\r\n    belem.style.background = \"url('./images/atom_icon.jpg')\";\r\n\r\n    belem.style.backgroundSize = \"cover\";\r\n    belem.style.backgroundRepeat = \"no-repeat\";\r\n    belem.style.borderRadius = \"50%\";\r\n    belem.style.marginTop = parseInt(coef_y * 100) + \"px\";\r\n    const bc = document.createElement(\"div\");\r\n    bc.id = \"bonusCounter\";\r\n    bc.style.position = \"absolute\";\r\n    bc.style.marginTop = parseInt(belem.style.marginTop) + parseInt(belem.style.height)  + \"px\";\r\n    bc.style.marginLeft = parseInt(belem.style.marginLeft) + 10 + \"px\";\r\n    bc.innerText = \"0\";\r\n    bc.style.fontSize = (coef_x + coef_y) * 1.2 + \"em\";\r\n    bc.style.display = \"none\";\r\n    belem.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(belem);\r\n    wind.appendChild(bc);\r\n}\r\n\r\n\r\nfunction create_player()\r\n{\r\n    const gf = document.getElementById(\"gameField\");\r\n    const player = document.createElement(\"div\");\r\n    player.id = \"player\";\r\n    player.style.position = \"absolute\";\r\n    player.style.background = \"url('images/open7.svg')\";\r\n    player.style.backgroundSize = \"cover\";\r\n    player.style.backgroundRepeat = \"no-repeat\";\r\n\r\n    player.style.width = parseInt((coef_x+coef_y)/2 * player_width) + \"px\";\r\n    player.style.height = parseInt((coef_y +coef_x) / 2* player_height)  + \"px\";\r\n    player.style.marginTop = (parseInt(gf.style.height) - parseInt(player.style.height)) + \"px\";\r\n    player.style.border = \"none\";\r\n    player.style.marginLeft = \"0\";\r\n    //player.style.display = \"inline\";\r\n    player.onclick = player_clicked;\r\n    player.onmousedown = player_catched;\r\n    player.onmouseup = player_uncatched;\r\n    player.ontouchstart = player_catched;\r\n    player.ontouchend = player_uncatched;\r\n    document.body.ontouchmove = mouse_moved;\r\n    gf.appendChild(player);\r\n}\r\n\r\n\r\nfunction key_pressed(event)\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        const player = document.getElementById(\"player\");\r\n\r\n        if(event.keyCode == \"37\" || event.keyCode == \"65\")\r\n        {\r\n            if(x1 - 1 > 0)\r\n            {\r\n                x2 -= 20;\r\n                x1 -= 20;\r\n                var ml = parseInt(player.style.marginLeft) - 20;\r\n                player.style.marginLeft = ml + \"px\";\r\n            }\r\n        }\r\n        else if(event.keyCode == \"38\" || event.keyCode == \"87\")\r\n        {\r\n            if(y2 + 2 < gf_height)\r\n            {\r\n               // alert(1);\r\n                y2 += 20;\r\n                y1 += 20;\r\n                var mt = parseInt(player.style.marginTop);\r\n                player.style.marginTop = mt - 20 + \"px\";\r\n            }\r\n        }\r\n        else if(event.keyCode == \"39\" || event.keyCode == \"68\")\r\n        {\r\n            if(x2 + 1 < gf_width)\r\n            {\r\n                //alert(1);\r\n                x2 += 20;\r\n                x1 += 20;\r\n                var ml = parseInt(player.style.marginLeft) + 20;\r\n                player.style.marginLeft = ml + \"px\";\r\n\r\n            }\r\n\r\n        }\r\n        else if(event.keyCode == \"40\" || event.keyCode == \"83\")\r\n        {\r\n            if(y1 - 5  > 0)\r\n            {\r\n               // alert(1);\r\n                y1 -= 20;\r\n                y2 -= 20;\r\n                var mt = parseInt(player.style.marginTop);\r\n                player.style.marginTop = mt + 20 + \"px\";\r\n            }\r\n        }\r\n        else if(event.keyCode == \"32\")\r\n        {\r\n            pause_clicked();\r\n        }\r\n    }\r\n    else if(event.keyCode == \"32\" && game_status == 2)\r\n        pause_clicked();\r\n}\r\n\r\n\r\nfunction player_clicked()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        if(player_active == 0)\r\n            player_active = 1;\r\n        else\r\n            player_active = 0;\r\n    }\r\n}\r\n\r\nfunction player_catched()\r\n{\r\n    player_active = 1;\r\n}\r\n\r\nfunction player_uncatched()\r\n{\r\n    player_active = 0;\r\n}\r\n\r\nfunction mouse_moved(e)\r\n{\r\n    \r\n    if(game_status == 1)\r\n    {\r\n        const player = document.getElementById(\"player\");\r\n        const gf = document.getElementById(\"gameField\");\r\n        var gf_w = parseInt(gf.style.width);\r\n        var gf_h = parseInt(gf.style.height);\r\n        var p_h = parseInt(player.style.height);\r\n        if(player_active)\r\n        {\r\n            var nx1, nx2,ny1,ny2;\r\n            var cx, cy;\r\n            if(mobile_mode == 0)\r\n            {\r\n                nx1 = e.clientX - parseInt(parseInt(player.style.width)*3/4);\r\n                ny1 = e.clientY - parseInt(parseInt(player.style.height)*3/4);\r\n                cx = e.clientX;\r\n                cy = e.clientY;\r\n            }\r\n            else\r\n            {\r\n                nx1 = e.touches[0].clientX - parseInt(parseInt(player.style.width)*3/4);\r\n                ny1 = e.touches[0].clientY - parseInt(parseInt(player.style.height)*3/4);\r\n                cx = e.touches[0].clientX;\r\n                cy = e.touches[0].clientY;\r\n            }\r\n            nx2 = nx1 + parseInt(player.style.width);\r\n            ny2 = ny1 + parseInt(player.style.height);\r\n            \r\n            if(nx1 >= 0 && nx2 <= gf_w)\r\n            {\r\n                player.style.marginLeft = cx - parseInt(parseInt(player.style.width)*3/4) + \"px\";\r\n                x1 = nx1;\r\n                x2 = nx2;\r\n            }\r\n            else if(nx1 < 0)\r\n            {\r\n                player.style.marginLeft = \"0\";\r\n                x1 = 0;\r\n                x2 = parseInt(player.style.width);\r\n            }\r\n            else if(nx2 > gf_w)\r\n            {\r\n                player.style.marginLeft = gf_w - parseInt(player.style.width) + \"px\";\r\n                x1 = gf_w - parseInt(player.style.width);\r\n                x2 = gf_w;\r\n            }\r\n            if(ny1 >= 0 && ny2 <= gf_h)\r\n            {\r\n                player.style.marginTop = cy - parseInt(parseInt(player.style.height)*3/4) + \"px\";\r\n                y2 = gf_h - parseInt(player.style.marginTop);\r\n                y1 = y2 - p_h;\r\n            }\r\n            else if(ny1 < 0)\r\n            {\r\n                player.style.marginTop = \"0\";\r\n                y2 = gf_h;\r\n                y1 = y2 - parseInt(player.style.height);\r\n            }\r\n            else if(ny2 > gf_h)\r\n            {\r\n                \r\n                player.style.marginTop = gf_h - p_h + \"px\";\r\n                y1 = 0;\r\n                y2 = p_h;\r\n                \r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction create_missiles()\r\n{\r\n    \r\n    const wind = document.getElementById(\"window\");\r\n    const gf = document.getElementById(\"gameField\");\r\n    \r\n    for(var i = 0; i < 100; i++)\r\n    {\r\n        const mislem = document.createElement(\"div\");\r\n        mislem.id = i+\"m\";\r\n        mislem.style.position = \"absolute\";\r\n        mislem.style.width = parseInt(coef_x * missile_width) + \"px\";\r\n        mislem.style.marginLeft = i * parseInt(coef_x * missile_width) + \"px\";\r\n        mislem.style.height = parseInt(coef_x * missile_height)  + \"px\";\r\n        mislem.style.background = \"url('images/black_missile2.png')\";\r\n        mislem.style.backgroundSize = \"cover\";\r\n        mislem.style.backgroundRepeat = \"no-repeat\";\r\n        mislem.style.marginTop = parseInt(coef_x * (-100)) + \"px\";\r\n        gf.appendChild(mislem);\r\n        free_missiles.push(i+\"m\");\r\n    }\r\n    \r\n    gf.style.overflow = \"hidden\";\r\n\r\n    \r\n}\r\n\r\n\r\n\r\nfunction create_bonuses()\r\n{\r\n    const gf = document.getElementById(\"gameField\");\r\n   \r\n    \r\n    for(var i = 0; i < 50; i++)\r\n    {\r\n        const bonlem = document.createElement(\"div\");\r\n        bonlem.id = i+\"b\";\r\n        bonlem.style.position = \"absolute\";\r\n        bonlem.style.width = parseInt(coef_x * bonus_width) + \"px\";\r\n        bonlem.style.marginLeft = i * parseInt(bonlem.style.width) + \"px\";\r\n        bonlem.style.height = bonlem.style.width;\r\n        bonlem.style.background = \"url('./images/atom_icon32_32.jpg')\";\r\n        bonlem.style.backgroundSize = \"cover\";\r\n        bonlem.style.backgroundRepeat = \"no-repeat\";\r\n        bonlem.style.borderRadius = \"50%\";\r\n        bonlem.style.marginTop = -1*parseInt(bonlem.style.height) - 10 + \"px\";\r\n        gf.appendChild(bonlem);\r\n        free_bonuses.push(i+\"b\");\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction init_bonuses()\r\n{\r\n   \r\n    bonus_init_id = setInterval(gen_bonuses, bon_gen_speed);\r\n\r\n}\r\n\r\nfunction gen_bonuses()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        var new_bon = free_bonuses.shift();\r\n        const bonlem = document.getElementById(new_bon);\r\n        const gf = document.getElementById(\"gameField\");\r\n        bonus_step = max_v(3, parseInt(secs / 10));\r\n        \r\n        var salt = new Date();\r\n        var ml = parseInt(Math.random()*10000*(salt%4159))%(parseInt(gf.style.width) - parseInt(bonlem.style.width));\r\n        bonlem.style.marginLeft = ml + \"px\";\r\n        active_bonuses[new_bon] = 1;\r\n        var bonus_id = setInterval(move_bonuses, bon_move_speed);\r\n        bonus_dict[new_bon] = bonus_id;\r\n    }\r\n}\r\n\r\nfunction init_missiles()\r\n{\r\n    missile_init_id = setInterval(gen_missiles, mis_gen_speed);\r\n\r\n}\r\n\r\nfunction gen_missiles()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        \r\n        var new_mis = free_missiles.shift();\r\n        const mislem = document.getElementById(new_mis);\r\n        var salt = new Date();\r\n    \r\n        var ml = (parseInt(Math.random()*10000*(salt%4159))%(max_missiles)) * parseInt(mislem.style.width);\r\n        mislem.style.marginLeft = ml + \"px\";\r\n        missile_active[new_mis] = 1;\r\n        //missile_step = max_v(1, parseInt(secs / 10));\r\n    \r\n        missile_step = 3;\r\n\r\n        //dif_param = 3 - min_v(2, parseInt(secs / 10));   добавляет режим матрицы к 20-ой секунде\r\n        dif_param = 3;\r\n        if(ml % dif_param  == 0)\r\n        {\r\n            var missile_id = setInterval(move_missiles, mis_move_speed);\r\n            missile_dict[new_mis] = missile_id;\r\n        }\r\n       \r\n    }\r\n}\r\nfunction mouse_over_mainBtn(event)\r\n{\r\n    const mainbtn = document.getElementById(\"mainBtn\");\r\n    mainbtn.style.border = \"2px solid black\";\r\n    mainbtn.style.cursor = \"pointer\";\r\n}\r\n\r\nfunction mouse_out_mainBtn()\r\n{\r\n    const mainbtn = document.getElementById(\"mainBtn\");\r\n    mainbtn.style.border = \"none\";\r\n    mainbtn.style.cursor = \"default\";\r\n}\r\n\r\nfunction start_clock()\r\n{\r\n    \r\n    clock_id = setInterval(change_time, 1000);\r\n    //clock_id2 = setTimeout(change_time, 2000);\r\n\r\n}\r\n\r\nfunction max_v(a, b)\r\n{\r\n    if(a > b)\r\n        return a;\r\n    else    \r\n        return b;   \r\n}\r\n\r\nfunction change_time()\r\n{\r\n    if(game_status == 1 && secs < win_time)\r\n    {\r\n        const clem = document.getElementById(\"clockBar\");\r\n        secs += 1;\r\n        var tsecs = 1;\r\n        if(secs <= 60)\r\n            tsecs = 60 - secs;\r\n        var mins = parseInt(tsecs / 60);\r\n        \r\n        var text_secs = tsecs % 60;\r\n        var text_mins = mins;\r\n        if (mins < 10)\r\n            text_mins = \"0\" + mins;\r\n        if(text_secs < 10)\r\n            text_secs = \"0\" + text_secs;\r\n        clem.innerText = text_mins + \":\" + text_secs;\r\n    }\r\n    else if(game_status == 1 && secs == win_time)\r\n    {\r\n        game_status = 0;\r\n        secs = 0;\r\n        temp_lvl = available_lvl;\r\n        if(regime == \"peaceful\")\r\n            temp_lvl = peaceful_available;\r\n        if(temp_lvl == current_lvl && current_lvl != 4)\r\n        {\r\n            temp_lvl += 1;\r\n            if(regime == \"peaceful\")\r\n            {\r\n                open_plevels[temp_lvl] = 1;\r\n            }\r\n            else\r\n                open_levels[temp_lvl] = 1;\r\n            update_levels();\r\n\r\n        }\r\n        if(regime == \"peaceful\")\r\n            peaceful_available = temp_lvl;\r\n        else\r\n            available_lvl = temp_lvl;\r\n        //hide_pause_button();\r\n        if(regime == \"peaceful\")\r\n        {\r\n            if(player_lifes > star_dict[current_lvl])\r\n                star_dict[current_lvl] = player_lifes;\r\n        }\r\n        update_cookies();\r\n        display_win_bar();\r\n    }\r\n}\r\nfunction update_levels()\r\n{\r\n\r\n    alert(Object.values(open_levels));\r\n    for(var i = 0; i < 4; i++)\r\n    {\r\n        const lvl = document.getElementById(num_to_level[i + 1]);\r\n        if(open_levels[i+1] == 1)\r\n            lvl.style.background = level_colors[i];\r\n        else\r\n            lvl.style.background = \"#777\";\r\n    }\r\n    for(var i = 0; i < 4; i++)\r\n    {\r\n        const lvl = document.getElementById(\"p\" + num_to_level[i + 1]);\r\n        if(open_plevels[i+1] == 1)\r\n            lvl.style.background = level_colors[i];\r\n        else\r\n            lvl.style.background = \"#777\";\r\n    }\r\n}\r\n\r\nfunction hide_pause_button()\r\n{\r\n    const pause = document.getElementById(\"pauseBtn\");\r\n    pause.style.display = \"none\";\r\n}\r\nfunction display_win_bar()\r\n{\r\n    if (regime == \"survival\")\r\n        show_ad();\r\n    const gf = document.getElementById(\"gameField\");\r\n    const winbar = document.getElementById(\"winBar\");\r\n    gf.style.opacity = \"0.5\";\r\n    winbar.style.display = \"block\";\r\n    if(regime == \"peaceful\")\r\n        display_animated_stars();\r\n}\r\n\r\nfunction min_v( a,  b)\r\n{\r\n    if(a < b)\r\n        return a;\r\n    return b;\r\n}\r\n\r\nfunction move_missiles()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        const gf = document.getElementById(\"gameField\");\r\n        var gf_h = parseInt(gf.style.height);\r\n        for(var mis_id in missile_active)\r\n        {\r\n            if(missile_active[mis_id] == 1)\r\n            {\r\n                const mislem = document.getElementById(mis_id);\r\n                var mt = parseInt(mislem.style.marginTop);\r\n                var my1 = gf_h - mt;\r\n                var mx1 = parseInt(mislem.style.marginLeft);\r\n                var my2 = my1 - parseInt(mislem.style.height);\r\n                var mx2 = mx1 + parseInt(mislem.style.width);\r\n                if(mx1 >= x1 && mx1 <= x2 && my2 >= y1 && my2 <= y2 || \r\n                    mx2 >= x1 && mx2 <= x2 && my2 >= y1 && my2 <= y2)\r\n                {\r\n                    clearInterval(missile_dict[mis_id]);\r\n                    game_status = 0;\r\n                    //hide_pause_button();\r\n                    display_lose_bar();\r\n                }\r\n                else if( mt + missile_step <= gf_h)\r\n                {\r\n                    mislem.style.marginTop = mt + missile_step + \"px\";\r\n                }   \r\n                else if(mt < gf_h)\r\n                {\r\n                    mislem.style.marginTop = gf_h + \"px\";\r\n                } \r\n                else if(mt == gf_h)\r\n                {\r\n                    clearInterval(missile_dict[mis_id]);\r\n                    missile_active[mis_id] = 0;\r\n                    mislem.style.marginTop = -1*parseInt(mislem.style.height) + \"px\";\r\n                    free_missiles.push(mis_id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction create_win_bar()\r\n{\r\n    const winlem = document.createElement(\"div\");\r\n    winlem.id = \"winBar\";\r\n    //winlem.style.marginLeft = parseInt(coef_x * 200) + \"px\";\r\n    //winlem.style.width = parseInt(coef_x * (win_bar_width +30)) + \"px\";\r\n    winlem.style.width = \"60%\"\r\n    winlem.style.marginLeft = \"15%\";\r\n    //winlem.style.height = parseInt(coef_y * win_bar_height) + \"px\";;\r\n    winlem.style.height = \"auto\";\r\n    winlem.innerText = \"Получилось!       \";\r\n    winlem.style.fontSize = (coef_x + coef_y) + \"em\";\r\n    winlem.style.background = \"#fff\";\r\n    winlem.style.border = \"3px solid black\";\r\n    winlem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    winlem.style.textAlign = \"center\";\r\n    winlem.style.marginTop = parseInt(coef_y *250) + \"px\";\r\n    winlem.style.position = \"absolute\";\r\n    \r\n    const mainlem = document.createElement(\"div\");\r\n    mainlem.id = \"mainBtn\";\r\n    mainlem.style.position = \"relative\";\r\n    mainlem.innerText = \"В меню\";\r\n    mainlem.style.width = \"80%\";\r\n    //mainlem.style.width = parseInt(0.7 * win_bar_width) + \"px\";\r\n    mainlem.style.marginLeft = \"8%\";\r\n    mainlem.onclick = display_main;\r\n    mainlem.onmouseover = mouse_over_mainBtn;\r\n    mainlem.onmouseout = mouse_out_mainBtn;\r\n    mainlem.style.background = \"#3e7\";\r\n    mainlem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 10) + \"px\";\r\n    mainlem.style.marginTop = parseInt((coef_y + coef_x)/2 * 15) + \"px\";\r\n    mainlem.style.height = \"auto\";\r\n    mainlem.style.display = \"block\";\r\n    mainlem.style.borderRadius = \"5%\";\r\n    mainlem.style.marginBottom = \"5px\";\r\n\r\n    winlem.style.display = \"none\";\r\n    winlem.appendChild(mainlem);\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(winlem);\r\n}\r\n\r\nfunction display_main()\r\n{\r\n    set_main_theme();\r\n    set_default();\r\n    const lvl_page = document.getElementById(\"levelPage\");\r\n    const plvl_page = document.getElementById(\"plevelPage\");\r\n    const gf = document.getElementById(\"gameField\");\r\n    const statlem = document.getElementById(\"clockBar\");\r\n    const belem = document.getElementById(\"bonusBar\");\r\n    const player = document.getElementById(\"player\");\r\n    const winlem = document.getElementById(\"winBar\");\r\n    const pause = document.getElementById(\"pauseBtn\");\r\n    const info = document.getElementById(\"info\");\r\n    const sure = document.getElementById(\"sureBar\");\r\n    const lifes = document.getElementById(\"lifesBar\");\r\n    const lc = document.getElementById(\"lifesCounter\");\r\n    const bc = document.getElementById(\"bonusCounter\");\r\n    hide_stars();\r\n    bc.style.display = \"none\";\r\n    lc.style.display = \"none\";\r\n    lifes.style.display = \"none\";\r\n    sure.style.display = \"none\";\r\n    info.style.display = \"none\";\r\n    pause.style.display = \"none\";\r\n    winlem.style.display = \"none\";\r\n    gf.style.display = \"none\";\r\n    statlem.style.display = \"none\";\r\n    belem.style.display = \"none\";\r\n    player.style.display = \"none\";\r\n    if(regime == \"survival\")\r\n        lvl_page.style.display = \"block\";\r\n    else\r\n    {\r\n        plvl_page.style.display = \"block\";\r\n        display_stars();\r\n        //alert(2);\r\n    }\r\n}\r\n\r\nfunction create_lose_bar()\r\n{\r\n    const rb = document.createElement(\"div\");\r\n    rb.id=\"loseBar\";\r\n    rb.style.position = \"absolute\";\r\n    rb.style.width = \"50%\";\r\n    rb.style.height = \"auto\";\r\n    rb.style.marginLeft = parseInt(coef_x * 220) + \"px\";\r\n    rb.style.fontSize = (coef_x + coef_y) + \"em\";\r\n    rb.style.marginTop = parseInt(coef_y * 280) + \"px\";\r\n    \r\n    rb.style.padding = parseInt(coef_y * 20) + \"px \" + parseInt(coef_x * 20) + \"px\";\r\n    rb.style.border = \"3px solid black\";\r\n    rb.style.fontFamily = \"Open Sans\";\r\n    rb.innerText = \"Не вышло... Пробуем ещё?\\n\";\r\n    rb.style.background = \"white\";\r\n\r\n    const yeslem = document.createElement(\"div\");\r\n    yeslem.id = \"yesBtn\";\r\n    yeslem.style.position = \"relative\";\r\n    yeslem.innerText = \"Да\";\r\n    yeslem.style.verticalAlign = \"middle\";\r\n    yeslem.style.fontSize = (coef_x + coef_y ) / 2 * 1.3 + \"em\";\r\n    yeslem.style.marginTop = parseInt(coef_y * 20) + \"px\";\r\n    yeslem.style.background = \"#3c3\";\r\n    yeslem.style.width = \"60%\";\r\n    yeslem.style.display  = \"block\";\r\n    yeslem.style.height = \"auto\";\r\n    //yeslem.style.margin = \"auto\";\r\n    yeslem.style.padding = parseInt(coef_y * 10) + \"px \" + parseInt(coef_x * 20) + \"px\";\r\n    yeslem.style.textAlign = \"center\";\r\n    yeslem.style.verticalAlign = \"middle\";\r\n    yeslem.style.borderRadius = \"5%\";\r\n    yeslem.style.marginLeft = \"15%\";\r\n    yeslem.onmouseover = mouse_over_choice;\r\n    yeslem.onmouseout = mouse_out_choice;\r\n    yeslem.onclick = restart;\r\n    yeslem.style.border = \"2px solid black\";\r\n    rb.appendChild(yeslem);\r\n    rb.style.display = \"none\";\r\n    const wind = document.getElementById(\"window\");\r\n    wind.appendChild(rb);\r\n    \r\n}\r\n//  выбор уровня - проигрыш - попробовать снова - меню \r\n\r\nfunction mouse_over_choice(event)\r\n{\r\n    const ch = document.getElementById(\"yesBtn\")\r\n    ch.style.cursor = \"pointer\";\r\n    ch.style.background = \"blue\";\r\n    ch.style.color = \"white\";\r\n}\r\n\r\nfunction mouse_out_choice()\r\n{\r\n    const yesb = document.getElementById(\"yesBtn\");\r\n    yesb.style.cursor = \"default\";\r\n    yesb.style.background = \"#3c3\";\r\n    yesb.style.color = \"black\";\r\n   \r\n    \r\n}\r\n\r\nfunction display_lose_bar()\r\n{\r\n    show_ad();\r\n    const gf = document.getElementById(\"gameField\");\r\n    gf.style.opacity = \"0.5\";\r\n    const rb = document.getElementById(\"loseBar\");\r\n    rb.style.display = \"block\";\r\n}\r\n\r\nfunction restart()\r\n{\r\n\r\n    set_default();\r\n    new_game();\r\n}\r\n\r\nfunction set_default()\r\n{\r\n    const lb = document.getElementById(\"loseBar\");\r\n    lb.style.display = \"none\";\r\n    secs = 0;\r\n    const clem = document.getElementById(\"clockBar\");\r\n    clem.innerText = \"01:00\";\r\n    const player = document.getElementById(\"player\");\r\n    const gf = document.getElementById(\"gameField\");\r\n    gf.style.opacity = \"1.0\";\r\n    if(regime == \"peaceful\")\r\n    {\r\n        const lc = document.getElementById(\"lifesCounter\");\r\n        lc.innerText = \"x3\";\r\n    }\r\n    zero_atoms = 0;\r\n    player.style.marginTop = (parseInt(gf.style.height) - parseInt(player.style.height)) + \"px\";\r\n    player.style.marginLeft = \"0px\";\r\n    player_lifes = 3;\r\n    x1 = 0;\r\n    x2 = x1 + parseInt(player.style.width);\r\n    y1 = 0;\r\n    y2 = y1 + parseInt(player.style.height);\r\n    bonus_counter = 0;\r\n    const bonuslem = document.getElementById(\"bonusCounter\");\r\n    bonuslem.innerText = \"0\";\r\n    player_active = 0;\r\n    missile_step = 1;\r\n    clearInterval(bonus_init_id);\r\n    clearInterval(missile_init_id);\r\n    clearInterval(clock_id);\r\n    for(var bonus_id in bonus_dict)\r\n    {\r\n        clearInterval(bonus_dict[bonus_id]);\r\n    }\r\n    for(var mis_id in missile_dict)\r\n    {\r\n        clearInterval(missile_dict[mis_id]);\r\n    }\r\n    for(var mis_id in missile_active)\r\n    {\r\n        missile_active[mis_id] = 0;\r\n        const mislem = document.getElementById(mis_id);\r\n        mislem.style.marginTop = -1*parseInt(mislem.style.height) + \"px\";\r\n    }\r\n    for(var bon_id in active_bonuses)\r\n    {\r\n        active_bonuses[bon_id] = 0;\r\n        const bonlem = document.getElementById(bon_id);\r\n        bonlem.style.marginTop = -1*parseInt(bonlem.style.height) + \"px\";\r\n    }\r\n    free_bonuses = [];\r\n    free_missiles = [];\r\n    for(var i = 0;i < created_bonuses; i++)\r\n        free_bonuses.push(i + \"b\");\r\n    for(var i = 0;i < created_missiles; i++)\r\n        free_missiles.push(i + \"m\");\r\n    bonus_dict = {};\r\n    missile_dict = {};\r\n    missile_active = {};\r\n    active_bonuses = {};\r\n    mis_move_speed = 19;\r\n}\r\nfunction check_ad()\r\n{\r\n    _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default().send('VKWebAppCheckNativeAds', { ad_format: 'interstitial' })\r\n    .then((data) => {\r\n    if (data.result) {\r\n      // Предзагруженная реклама есть.\r\n      // Теперь можно создать кнопку\r\n      // \"Посмотрите рекламу\".   \r\n      // ...\r\n            \r\n    } else {\r\n        if(mobile_mode == 0)\r\n        {\r\n            const adlem = document.getElementById(\"adWarning\");\r\n            adlem.style.display = \"block\";\r\n        }\r\n       // alert(\"Пожалуйста, выключите блокировщик рекламы. Я так не могу работать :(\");\r\n    }\r\n     })\r\n    .catch((error) => { alert(\"здесь должна быть какая-то ошибка\"); /* Ошибка */  });\r\n}\r\nfunction show_ad()\r\n{\r\n    check_ad();\r\n    _vkontakte_vk_bridge__WEBPACK_IMPORTED_MODULE_0___default().send('VKWebAppShowNativeAds', { ad_format: 'interstitial' })\r\n    .then((data) => {\r\n    if (data.result)\r\n        console.log('Реклама показана');\r\n    else\r\n        alert('Ошибка при показе');\r\n    })\r\n    .catch((error) => { alert(2); /* Ошибка */ });\r\n}\r\n\r\nfunction move_bonuses()\r\n{\r\n    if(game_status == 1)\r\n    {\r\n        const gf = document.getElementById(\"gameField\");\r\n        var gf_h = parseInt(gf.style.height);\r\n        for(var key in active_bonuses)\r\n        {\r\n            if(active_bonuses[key] == 1)\r\n            {\r\n                const bonlem = document.getElementById(key);\r\n                var mt = parseInt(bonlem.style.marginTop);\r\n                var by1 = parseInt(gf.style.height) - mt;\r\n                var bx1 = parseInt(bonlem.style.marginLeft);\r\n                var by2 = by1 - parseInt(bonlem.style.height);\r\n                var bx2 = bx1 + parseInt(bonlem.style.width);\r\n            \r\n                if(bx1 >= x1 && bx1 <= x2 && by2 >= y1 && by2 <= y2 || \r\n                    bx2 >= x1 && bx2 <= x2 && by2 >= y1 && by2 <= y2)\r\n                {\r\n                    //alert([bx1,x1,])\r\n                    const bb = document.getElementById(\"bonusCounter\");\r\n                    bonus_counter += 1;\r\n                    bb.innerText = bonus_counter;\r\n                    active_bonuses[key] = 0;\r\n                    bonlem.style.marginTop = -1* parseInt(bonlem.style.height) + \"px\";\r\n                    free_bonuses.push(key);\r\n                    clearInterval(bonus_dict[key]);\r\n                }\r\n                else if( mt + bonus_step <= gf_h)\r\n                {\r\n                    bonlem.style.marginTop = mt + bonus_step + \"px\";\r\n                }   \r\n                else if(mt < gf_h)\r\n                {\r\n                    bonlem.style.marginTop = gf_h + \"px\";\r\n                } \r\n                else if(mt == gf_h)\r\n                {\r\n                    clearInterval(bonus_dict[key]);\r\n                    active_bonuses[key] = 0;\r\n                    bonlem.style.marginTop = -1*parseInt(bonlem.style.height) + \"px\";\r\n                    free_bonuses.push(key);\r\n                    if(regime == \"peaceful\")\r\n                    {\r\n                        const lifes = document.getElementById(\"lifesCounter\");\r\n                        player_lifes -= 1;\r\n                        lifes.innerText = \"x\" + player_lifes;\r\n                        if(player_lifes <= 0)\r\n                        {\r\n                            game_status = 0;\r\n                            display_lose_bar();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n}\n\n//# sourceURL=webpack://open_gamer_wp2/./src/index.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;